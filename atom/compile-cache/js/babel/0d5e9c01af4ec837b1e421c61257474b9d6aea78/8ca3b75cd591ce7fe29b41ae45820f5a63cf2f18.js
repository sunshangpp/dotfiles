var RemoteRevision = require("../lib/util/RemoteRevision");

describe("RemoteRevision", function () {

  var DEFAULT_HASH = "12345";
  var instance;
  var fakeRemoteUrl = "git@github.com/alexcorre/git-blame.git";

  beforeEach(function () {
    instance = new RemoteRevision(fakeRemoteUrl);
  });

  describe("parseProjectAndRepo", function () {

    beforeEach(function () {
      instance.hash = DEFAULT_HASH;
      instance.remote = null;
    });

    afterEach(function () {
      instance.hash = null;
      instance.remote = fakeRemoteUrl;
    });

    it("Should return an empty object if pattern does not match", function () {
      var weirdRemote = "NOT_MATCHING";
      instance.remote = weirdRemote;

      var output = instance.parseProjectAndRepo();
      expect(output).toEqual({});
    });

    it("Should parse a standard github url correctly", function () {
      var githubRemote = "git@github.com:project/someRepo.git";
      instance.remote = githubRemote;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "project",
        repo: "someRepo"
      });
    });

    it("Should parse a standard github url without the .git ending correctly", function () {
      var githubRemote = "git@github.com:project/someRepo";
      instance.remote = githubRemote;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "project",
        repo: "someRepo"
      });
    });

    it("Should parse a read only github url correctly", function () {
      var githubHttpRemote = "https://github.com/project/someRepo.git";
      instance.remote = githubHttpRemote;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "project",
        repo: "someRepo"
      });
    });

    it("Should parse a repo url with dashes", function () {
      var githubHttpRemote = "https://github.com/some-project/some-repo.git";
      instance.remote = githubHttpRemote;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "some-project",
        repo: "some-repo"
      });
    });

    it("Should parse a repo url with dashes and wthout a .git ending correctly", function () {
      var githubHttpRemote = "https://github.com/some-project/some-repo";
      instance.remote = githubHttpRemote;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "some-project",
        repo: "some-repo"
      });
    });

    it("Should work with a url with a port", function () {
      var portRemoteUrl = "ssh://git@git.my-company.com:2222/group/repo-name.git";
      instance.remote = portRemoteUrl;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "group",
        repo: "repo-name"
      });
    });

    it("Should work with a url with a port and colon", function () {
      var portRemoteUrl = "git@git.my-company.com:2222:group/repo-name.git";
      instance.remote = portRemoteUrl;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "group",
        repo: "repo-name"
      });
    });

    it("Should work without a project", function () {
      var repoOnlyUrl = "git@git.my-company.com:repo-name.git";
      instance.remote = repoOnlyUrl;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "repo-name",
        repo: "repo-name"
      });
    });

    it("Should work when there is a . in the repo name", function () {
      var dotRepoUrl = "git@github.com:MoOx/moox.github.io.git";
      instance.remote = dotRepoUrl;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "MoOx",
        repo: "moox.github.io"
      });
    });

    it("Should work when there is a . in the project name", function () {
      var dotRepoUrl = "git@github.com:Mo.Ox/moox.github.io.git";
      instance.remote = dotRepoUrl;

      var output = instance.parseProjectAndRepo();

      expect(output).toEqual({
        project: "Mo.Ox",
        repo: "moox.github.io"
      });
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2dpdC1ibGFtZS9zcGVjL1JlbW90ZVJldmlzaW9uLXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSSxjQUFjLEdBQUcsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7O0FBRTNELFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxZQUFXOztBQUVwQyxNQUFJLFlBQVksR0FBRyxPQUFPLENBQUM7QUFDM0IsTUFBSSxRQUFRLENBQUM7QUFDYixNQUFJLGFBQWEsR0FBRyx3Q0FBd0MsQ0FBQzs7QUFFN0QsWUFBVSxDQUFDLFlBQVk7QUFDckIsWUFBUSxHQUFHLElBQUksY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0dBQzlDLENBQUMsQ0FBQzs7QUFFSCxVQUFRLENBQUMscUJBQXFCLEVBQUUsWUFBVzs7QUFFekMsY0FBVSxDQUFDLFlBQVk7QUFDckIsY0FBUSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUM7QUFDN0IsY0FBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7S0FDeEIsQ0FBQyxDQUFDOztBQUVILGFBQVMsQ0FBQyxZQUFZO0FBQ3BCLGNBQVEsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLGNBQVEsQ0FBQyxNQUFNLEdBQUcsYUFBYSxDQUFDO0tBQ2pDLENBQUMsQ0FBQzs7QUFFSCxNQUFFLENBQUMseURBQXlELEVBQUUsWUFBWTtBQUN4RSxVQUFJLFdBQVcsR0FBRyxjQUFjLENBQUM7QUFDakMsY0FBUSxDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUM7O0FBRTlCLFVBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0FBQzVDLFlBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7S0FDNUIsQ0FBQyxDQUFDOztBQUdILE1BQUUsQ0FBQyw4Q0FBOEMsRUFBRSxZQUFZO0FBQzdELFVBQUksWUFBWSxHQUFHLHFDQUFxQyxD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UmV2aXNpb24tc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBSZW1vdGVSZXZpc2lvbiA9IHJlcXVpcmUoJy4uL2xpYi91dGlsL1JlbW90ZVJldmlzaW9uJyk7XG5cbmRlc2NyaWJlKCdSZW1vdGVSZXZpc2lvbicsIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBERUZBVUxUX0hBU0ggPSAnMTIzNDUnO1xuICB2YXIgaW5zdGFuY2U7XG4gIHZhciBmYWtlUmVtb3RlVXJsID0gJ2dpdEBnaXRodWIuY29tL2FsZXhjb3JyZS9naXQtYmxhbWUuZ2l0JztcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBpbnN0YW5jZSA9IG5ldyBSZW1vdGVSZXZpc2lvbihmYWtlUmVtb3RlVXJsKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3BhcnNlUHJvamVjdEFuZFJlcG8nLCBmdW5jdGlvbigpIHtcblxuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgaW5zdGFuY2UuaGFzaCA9IERFRkFVTFRfSEFTSDtcbiAgICAgIGluc3RhbmNlLnJlbW90ZSA9IG51bGw7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgaW5zdGFuY2UuaGFzaCA9IG51bGw7XG4gICAgICBpbnN0YW5jZS5yZW1vdGUgPSBmYWtlUmVtb3RlVXJsO1xuICAgIH0pO1xuXG4gICAgaXQoJ1Nob3VsZCByZXR1cm4gYW4gZW1wdHkgb2JqZWN0IGlmIHBhdHRlcm4gZG9lcyBub3QgbWF0Y2gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgd2VpcmRSZW1vdGUgPSAnTk9UX01BVENISU5HJztcbiAgICAgIGluc3RhbmNlLnJlbW90ZSA9IHdlaXJkUmVtb3RlO1xuXG4gICAgICB2YXIgb3V0cHV0ID0gaW5zdGFuY2UucGFyc2VQcm9qZWN0QW5kUmVwbygpO1xuICAgICAgZXhwZWN0KG91dHB1dCkudG9FcXVhbCh7fSk7XG4gICAgfSk7XG5cblxuICAgIGl0KCdTaG91bGQgcGFyc2UgYSBzdGFuZGFyZCBnaXRodWIgdXJsIGNvcnJlY3RseScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnaXRodWJSZW1vdGUgPSAnZ2l0QGdpdGh1Yi5jb206cHJvamVjdC9zb21lUmVwby5naXQnO1xuICAgICAgaW5zdGFuY2UucmVtb3RlID0gZ2l0aHViUmVtb3RlO1xuXG4gICAgICB2YXIgb3V0cHV0ID0gaW5zdGFuY2UucGFyc2VQcm9qZWN0QW5kUmVwbygpO1xuXG4gICAgICBleHBlY3Qob3V0cHV0KS50b0VxdWFsKHtcbiAgICAgICAgcHJvamVjdDogJ3Byb2plY3QnLFxuICAgICAgICByZXBvOiAnc29tZVJlcG8nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdTaG91bGQgcGFyc2UgYSBzdGFuZGFyZCBnaXRodWIgdXJsIHdpdGhvdXQgdGhlIC5naXQgZW5kaW5nIGNvcnJlY3RseScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnaXRodWJSZW1vdGUgPSAnZ2l0QGdpdGh1Yi5jb206cHJvamVjdC9zb21lUmVwbyc7XG4gICAgICBpbnN0YW5jZS5yZW1vdGUgPSBnaXRodWJSZW1vdGU7XG5cbiAgICAgIHZhciBvdXRwdXQgPSBpbnN0YW5jZS5wYXJzZVByb2plY3RBbmRSZXBvKCk7XG5cbiAgICAgIGV4cGVjdChvdXRwdXQpLnRvRXF1YWwoe1xuICAgICAgICBwcm9qZWN0OiAncHJvamVjdCcsXG4gICAgICAgIHJlcG86ICdzb21lUmVwbydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ1Nob3VsZCBwYXJzZSBhIHJlYWQgb25seSBnaXRodWIgdXJsIGNvcnJlY3RseScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnaXRodWJIdHRwUmVtb3RlID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9wcm9qZWN0L3NvbWVSZXBvLmdpdCc7XG4gICAgICBpbnN0YW5jZS5yZW1vdGUgPSBnaXRodWJIdHRwUmVtb3RlO1xuXG4gICAgICB2YXIgb3V0cHV0ID0gaW5zdGFuY2UucGFyc2VQcm9qZWN0QW5kUmVwbygpO1xuXG4gICAgICBleHBlY3Qob3V0cHV0KS50b0VxdWFsKHtcbiAgICAgICAgcHJvamVjdDogJ3Byb2plY3QnLFxuICAgICAgICByZXBvOiAnc29tZVJlcG8nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdTaG91bGQgcGFyc2UgYSByZXBvIHVybCB3aXRoIGRhc2hlcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnaXRodWJIdHRwUmVtb3RlID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9zb21lLXByb2plY3Qvc29tZS1yZXBvLmdpdCc7XG4gICAgICBpbnN0YW5jZS5yZW1vdGUgPSBnaXRodWJIdHRwUmVtb3RlO1xuXG4gICAgICB2YXIgb3V0cHV0ID0gaW5zdGFuY2UucGFyc2VQcm9qZWN0QW5kUmVwbygpO1xuXG4gICAgICBleHBlY3Qob3V0cHV0KS50b0VxdWFsKHtcbiAgICAgICAgcHJvamVjdDogJ3NvbWUtcHJvamVjdCcsXG4gICAgICAgIHJlcG86ICdzb21lLXJlcG8nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdTaG91bGQgcGFyc2UgYSByZXBvIHVybCB3aXRoIGRhc2hlcyBhbmQgd3Rob3V0IGEgLmdpdCBlbmRpbmcgY29ycmVjdGx5JywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGdpdGh1Ykh0dHBSZW1vdGUgPSAnaHR0cHM6Ly9naXRodWIuY29tL3NvbWUtcHJvamVjdC9zb21lLXJlcG8nO1xuICAgICAgaW5zdGFuY2UucmVtb3RlID0gZ2l0aHViSHR0cFJlbW90ZTtcblxuICAgICAgdmFyIG91dHB1dCA9IGluc3RhbmNlLnBhcnNlUHJvamVjdEFuZFJlcG8oKTtcblxuICAgICAgZXhwZWN0KG91dHB1dCkudG9FcXVhbCh7XG4gICAgICAgIHByb2plY3Q6ICdzb21lLXByb2plY3QnLFxuICAgICAgICByZXBvOiAnc29tZS1yZXBvJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnU2hvdWxkIHdvcmsgd2l0aCBhIHVybCB3aXRoIGEgcG9ydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvcnRSZW1vdGVVcmwgPSAnc3NoOi8vZ2l0QGdpdC5teS1jb21wYW55LmNvbToyMjIyL2dyb3VwL3JlcG8tbmFtZS5naXQnO1xuICAgICAgaW5zdGFuY2UucmVtb3RlID0gcG9ydFJlbW90ZVVybDtcblxuICAgICAgdmFyIG91dHB1dCA9IGluc3RhbmNlLnBhcnNlUHJvamVjdEFuZFJlcG8oKTtcblxuICAgICAgZXhwZWN0KG91dHB1dCkudG9FcXVhbCh7XG4gICAgICAgIHByb2plY3Q6ICdncm91cCcsXG4gICAgICAgIHJlcG86ICdyZXBvLW5hbWUnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdTaG91bGQgd29yayB3aXRoIGEgdXJsIHdpdGggYSBwb3J0IGFuZCBjb2xvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvcnRSZW1vdGVVcmwgPSAnZ2l0QGdpdC5teS1jb21wYW55LmNvbToyMjIyOmdyb3VwL3JlcG8tbmFtZS5naXQnO1xuICAgICAgaW5zdGFuY2UucmVtb3RlID0gcG9ydFJlbW90ZVVybDtcblxuICAgICAgdmFyIG91dHB1dCA9IGluc3RhbmNlLnBhcnNlUHJvamVjdEFuZFJlcG8oKTtcblxuICAgICAgZXhwZWN0KG91dHB1dCkudG9FcXVhbCh7XG4gICAgICAgIHByb2plY3Q6ICdncm91cCcsXG4gICAgICAgIHJlcG86ICdyZXBvLW5hbWUnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdTaG91bGQgd29yayB3aXRob3V0IGEgcHJvamVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlcG9Pbmx5VXJsID0gJ2dpdEBnaXQubXktY29tcGFueS5jb206cmVwby1uYW1lLmdpdCc7XG4gICAgICBpbnN0YW5jZS5yZW1vdGUgPSByZXBvT25seVVybDtcblxuICAgICAgdmFyIG91dHB1dCA9IGluc3RhbmNlLnBhcnNlUHJvamVjdEFuZFJlcG8oKTtcblxuICAgICAgZXhwZWN0KG91dHB1dCkudG9FcXVhbCh7XG4gICAgICAgIHByb2plY3Q6ICdyZXBvLW5hbWUnLFxuICAgICAgICByZXBvOiAncmVwby1uYW1lJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnU2hvdWxkIHdvcmsgd2hlbiB0aGVyZSBpcyBhIC4gaW4gdGhlIHJlcG8gbmFtZScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRvdFJlcG9VcmwgPSAnZ2l0QGdpdGh1Yi5jb206TW9PeC9tb294LmdpdGh1Yi5pby5naXQnO1xuICAgICAgaW5zdGFuY2UucmVtb3RlID0gZG90UmVwb1VybDtcblxuICAgICAgdmFyIG91dHB1dCA9IGluc3RhbmNlLnBhcnNlUHJvamVjdEFuZFJlcG8oKTtcblxuICAgICAgZXhwZWN0KG91dHB1dCkudG9FcXVhbCh7XG4gICAgICAgIHByb2plY3Q6ICdNb094JyxcbiAgICAgICAgcmVwbzogJ21vb3guZ2l0aHViLmlvJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnU2hvdWxkIHdvcmsgd2hlbiB0aGVyZSBpcyBhIC4gaW4gdGhlIHByb2plY3QgbmFtZScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRvdFJlcG9VcmwgPSAnZ2l0QGdpdGh1Yi5jb206TW8uT3gvbW9veC5naXRodWIuaW8uZ2l0JztcbiAgICAgIGluc3RhbmNlLnJlbW90ZSA9IGRvdFJlcG9Vcmw7XG5cbiAgICAgIHZhciBvdXRwdXQgPSBpbnN0YW5jZS5wYXJzZVByb2plY3RBbmRSZXBvKCk7XG5cbiAgICAgIGV4cGVjdChvdXRwdXQpLnRvRXF1YWwoe1xuICAgICAgICBwcm9qZWN0OiAnTW8uT3gnLFxuICAgICAgICByZXBvOiAnbW9veC5naXRodWIuaW8nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICB9KTtcblxufSk7XG4iXX0=