'use babel';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.getDeep = getDeep;
exports.elementPropInHierarcy = elementPropInHierarcy;
exports.eachElementInHierarchy = eachElementInHierarchy;
exports.debounce = debounce;
var REGEX_TO_INDEX = /\[["']?(\w+)["']?\]/g;
var REGEX_LEADING_DOT = /^\./;

function getDeep(o, path) {
  path = path
  // convert indexes to properties (like a["b"]['c'][0])
  .replace(REGEX_TO_INDEX, '.$1')
  // strip a leading dot (as it might occur because of the previous replace)
  .replace(REGEX_LEADING_DOT, '').split('.');

  var obj = o;
  while (obj && path.length) {
    var n = path.shift();
    obj = obj[n];
  }
  return obj;
}

function elementPropInHierarcy(element, prop) {
  var el = eachElementInHierarchy(element, function (el) {
    return getDeep(el, prop) !== undefined;
  });
  return getDeep(el, prop);
}

function eachElementInHierarchy(element, fn) {
  while (element && !fn(element)) {
    element = element.parentElement;
  }
  return element;
}

function debounce(func, wait) {
  if (!wait) {
    return func;
  }
  var timeout = undefined;
  var fn = function fn() {
    var context = this;
    var args = arguments;
    fn.cancel();
    timeout = setTimeout(function () {
      timeout = null;
      func.apply(context, args);
    }, wait);
  };
  fn.cancel = function () {
    return clearTimeout(timeout);
  };
  return fn;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2dvLWRlYnVnL2xpYi91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUE7Ozs7Ozs7OztBQUVYLElBQU0sY0FBYyxHQUFHLHNCQUFzQixDQUFBO0FBQzdDLElBQU0saUJBQWlCLEdBQUcsS0FBSyxDQUFBOztBQUN4QixTQUFTLE9BQU8sQ0FBRSxDQUFDLEVBQUUsSUFBSSxFQUFFO0FBQ2hDLE1BQUksR0FBRyxJQUFJOztHQUVSLE9BQU8sQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDOztHQUU5QixPQUFPLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxDQUFDLENBQzlCLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTs7QUFFYixNQUFJLEdBQUcsR0FBRyxDQUFDLENBQUE7QUFDWCxTQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLFFBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtBQUNwQixPQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0dBQ2I7QUFDRCxTQUFPLEdBQUcsQ0FBQTtDQUNYOztBQUVNLFNBQVMscUJBQXFCLENBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNwRCxNQUFNLEVBQUUsR0FBRyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsVUFBQyxFQUFFO1dBQUssT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsS0FBSyxTQUFTO0dBQUEsQ0FBQyxDQUFBO0FBQ25GLFNBQU8sT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQTtDQUN6Qjs7QUFFTSxTQUFTLHNCQUFzQixDQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7QUFDbkQsU0FBTyxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDOUIsV0FBTyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUE7R0FDaEM7QUFDRCxTQUFPLE9BQU8sQ0FBQTtDQUNmOztBQUVNLFNBQVMsUUFBUSxDQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDcEMsTUFBSSxDQUFDLElBQUksRUFBRTtBQUNULFdBQU8sSUFBSSxDQUFBO0dBQ1o7QUFDRCxNQUFJLE9BQU8sWUFBQSxDQUFBO0FBQ1gsTUFBTSxFQUFFLEdBQUcsU0FBTCxFQUFFLEdBQWU7QUFDckIsUUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFBO0FBQ3BCLFFBQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQTtBQUN0QixNQUFFLENBQUMsTUFBTSxFQUFFLENBQUE7QUFDWCxXQUFPLEdBQUcsVUFBVSxDQUFDLFlBQU07QUFDekIsYUFBTyxHQUFHLElBQUksQ0FBQTtBQUNkLFVBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO0tBQzFCLEVBQUUsSUFBSSxDQUFDLENBQUE7R0FDVCxDQUFBO0FBQ0QsSUFBRSxDQUFDLE1BQU0sR0FBRztXQUFNLFlBQVksQ0FBQyxPQUFPLENBQUM7R0FBQSxDQUFBO0FBQ3ZDLFNBQU8sRUFBRSxDQUFBO0NBQ1YiLCJmaWxlIjoiL1VzZXJzL3NzdW4vLmF0b20vcGFja2FnZXMvZ28tZGVidWcvbGliL3V0aWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCdcblxuY29uc3QgUkVHRVhfVE9fSU5ERVggPSAvXFxbW1wiJ10/KFxcdyspW1wiJ10/XFxdL2dcbmNvbnN0IFJFR0VYX0xFQURJTkdfRE9UID0gL15cXC4vXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVlcCAobywgcGF0aCkge1xuICBwYXRoID0gcGF0aFxuICAgIC8vIGNvbnZlcnQgaW5kZXhlcyB0byBwcm9wZXJ0aWVzIChsaWtlIGFbXCJiXCJdWydjJ11bMF0pXG4gICAgLnJlcGxhY2UoUkVHRVhfVE9fSU5ERVgsICcuJDEnKVxuICAgIC8vIHN0cmlwIGEgbGVhZGluZyBkb3QgKGFzIGl0IG1pZ2h0IG9jY3VyIGJlY2F1c2Ugb2YgdGhlIHByZXZpb3VzIHJlcGxhY2UpXG4gICAgLnJlcGxhY2UoUkVHRVhfTEVBRElOR19ET1QsICcnKVxuICAgIC5zcGxpdCgnLicpXG5cbiAgdmFyIG9iaiA9IG9cbiAgd2hpbGUgKG9iaiAmJiBwYXRoLmxlbmd0aCkge1xuICAgIHZhciBuID0gcGF0aC5zaGlmdCgpXG4gICAgb2JqID0gb2JqW25dXG4gIH1cbiAgcmV0dXJuIG9ialxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudFByb3BJbkhpZXJhcmN5IChlbGVtZW50LCBwcm9wKSB7XG4gIGNvbnN0IGVsID0gZWFjaEVsZW1lbnRJbkhpZXJhcmNoeShlbGVtZW50LCAoZWwpID0+IGdldERlZXAoZWwsIHByb3ApICE9PSB1bmRlZmluZWQpXG4gIHJldHVybiBnZXREZWVwKGVsLCBwcm9wKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWFjaEVsZW1lbnRJbkhpZXJhcmNoeSAoZWxlbWVudCwgZm4pIHtcbiAgd2hpbGUgKGVsZW1lbnQgJiYgIWZuKGVsZW1lbnQpKSB7XG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudFxuICB9XG4gIHJldHVybiBlbGVtZW50XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZSAoZnVuYywgd2FpdCkge1xuICBpZiAoIXdhaXQpIHtcbiAgICByZXR1cm4gZnVuY1xuICB9XG4gIGxldCB0aW1lb3V0XG4gIGNvbnN0IGZuID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzXG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50c1xuICAgIGZuLmNhbmNlbCgpXG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGltZW91dCA9IG51bGxcbiAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncylcbiAgICB9LCB3YWl0KVxuICB9XG4gIGZuLmNhbmNlbCA9ICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICByZXR1cm4gZm5cbn1cbiJdfQ==
//# sourceURL=/Users/ssun/.atom/packages/go-debug/lib/utils.js
