function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

/* eslint-env jasmine */

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _temp = require('temp');

var _temp2 = _interopRequireDefault(_temp);

var _fsPlus = require('fs-plus');

var _fsPlus2 = _interopRequireDefault(_fsPlus);

'use babel';

describe('tester', function () {
  var mainModule = null;
  var gopath = null;
  var oldGopath = null;

  beforeEach(function () {
    runs(function () {
      if (process.env.GOPATH) {
        oldGopath = process.env.GOPATH;
      }
      gopath = _temp2['default'].mkdirSync();
      process.env.GOPATH = gopath;
      atom.project.setPaths(gopath);
    });

    waitsForPromise(function () {
      return atom.packages.activatePackage('go-config').then(function () {
        return atom.packages.activatePackage('tester-go');
      }).then(function (pack) {
        mainModule = pack.mainModule;
        return atom.packages.activatePackage('language-go');
      });
    });

    waitsFor(function () {
      return mainModule.getGoconfig() !== false;
    });
  });

  afterEach(function () {
    if (oldGopath) {
      process.env.GOPATH = oldGopath;
    } else {
      delete process.env.GOPATH;
    }
  });

  describe('when run coverage on save is disabled', function () {
    var filePath = undefined;
    var testFilePath = undefined;
    var editor = undefined;
    var testEditor = undefined;

    beforeEach(function () {
      atom.config.set('tester-go.runCoverageOnSave', false);
      filePath = _path2['default'].join(gopath, 'src', 'github.com', 'testuser', 'example', 'go-plus.go');
      testFilePath = _path2['default'].join(gopath, 'src', 'github.com', 'testuser', 'example', 'go-plus_test.go');
      _fsPlus2['default'].writeFileSync(filePath, '');
      _fsPlus2['default'].writeFileSync(testFilePath, '');
      waitsForPromise(function () {
        return atom.workspace.open(filePath).then(function (e) {
          editor = e;
        });
      });

      waitsForPromise(function () {
        return atom.workspace.open(testFilePath).then(function (e) {
          testEditor = e;
        });
      });
    });

    it('displays coverage for go source', function () {
      var buffer = editor.getBuffer();
      buffer.setText('package main\n\nimport "fmt"\n\nfunc main()  {\n\tfmt.Println(Hello())\n}\n\nfunc Hello() string {\n\treturn "Hello, 世界"\n}\n');
      buffer.save();
      var testBuffer = testEditor.getBuffer();
      testBuffer.setText('package main\n\nimport "testing"\n\nfunc TestHello(t *testing.T) {\n\tresult := Hello()\n\tif result != "Hello, 世界" {\n\t\tt.Errorf("Expected %s - got %s", "Hello, 世界", result)\n\t}\n}');
      testBuffer.save();
      var p = mainModule.getTester().runCoverage(editor);

      waitsForPromise(function () {
        return p;
      });

      runs(function () {
        var layerids = mainModule.getTester().markedEditors.get(editor.id).split(',');
        var coveredLayer = editor.getMarkerLayer(layerids[0]);
        var uncoveredLayer = editor.getMarkerLayer(layerids[1]);
        expect(coveredLayer).toBeTruthy();
        expect(uncoveredLayer).toBeTruthy();

        var coveredmarkers = coveredLayer.getMarkers();
        expect(coveredmarkers).toBeDefined();
        expect(coveredmarkers.length).toBe(1);
        expect(coveredmarkers[0]).toBeDefined();
        var range = coveredmarkers[0].getBufferRange();
        expect(range.start.row).toBe(8);
        expect(range.start.column).toBe(20);
        expect(range.end.row).toBe(10);
        expect(range.end.column).toBe(1);

        var uncoveredmarkers = uncoveredLayer.getMarkers();
        expect(uncoveredmarkers).toBeDefined();
        expect(uncoveredmarkers.length).toBe(1);
        expect(uncoveredmarkers[0]).toBeDefined();
        range = uncoveredmarkers[0].getBufferRange();
        expect(range).toBeDefined();
        expect(range.start.row).toBe(4);
        expect(range.start.column).toBe(13);
        expect(range.end.row).toBe(6);
        expect(range.end.column).toBe(1);
      });

      p = mainModule.getTester().runCoverage(editor);

      waitsForPromise(function () {
        return p;
      });

      runs(function () {
        var layerids = mainModule.getTester().markedEditors.get(editor.id).split(',');
        var coveredLayer = editor.getMarkerLayer(layerids[0]);
        var uncoveredLayer = editor.getMarkerLayer(layerids[1]);
        expect(coveredLayer).toBeTruthy();
        expect(uncoveredLayer).toBeTruthy();

        var coveredmarkers = coveredLayer.getMarkers();
        expect(coveredmarkers).toBeDefined();
        expect(coveredmarkers.length).toBe(1);
        expect(coveredmarkers[0]).toBeDefined();
        var range = coveredmarkers[0].getBufferRange();
        expect(range.start.row).toBe(8);
        expect(range.start.column).toBe(20);
        expect(range.end.row).toBe(10);
        expect(range.end.column).toBe(1);

        var uncoveredmarkers = uncoveredLayer.getMarkers();
        expect(uncoveredmarkers).toBeDefined();
        expect(uncoveredmarkers.length).toBe(1);
        expect(uncoveredmarkers[0]).toBeDefined();
        range = uncoveredmarkers[0].getBufferRange();
        expect(range).toBeDefined();
        expect(range.start.row).toBe(4);
        expect(range.start.column).toBe(13);
        expect(range.end.row).toBe(6);
        expect(range.end.column).toBe(1);
      });

      expect(mainModule).toBeDefined();
      expect(mainModule).toBeTruthy();
      expect(mainModule.getGoconfig).toBeDefined();
      expect(mainModule.consumeGoconfig).toBeDefined();
      expect(mainModule.getGoconfig()).toBeTruthy();
      expect(mainModule.tester).toBeDefined();
      expect(mainModule.tester).toBeTruthy();
    });

    it('clears coverage for go source', function () {
      var buffer = editor.getBuffer();
      buffer.setText('package main\n\nimport "fmt"\n\nfunc main()  {\n\tfmt.Println(Hello())\n}\n\nfunc Hello() string {\n\treturn "Hello, 世界"\n}\n');
      buffer.save();
      var testBuffer = testEditor.getBuffer();
      testBuffer.setText('package main\n\nimport "testing"\n\nfunc TestHello(t *testing.T) {\n\tresult := Hello()\n\tif result != "Hello, 世界" {\n\t\tt.Errorf("Expected %s - got %s", "Hello, 世界", result)\n\t}\n}');
      testBuffer.save();
      var p = mainModule.getTester().runCoverage(editor);

      waitsForPromise(function () {
        return p;
      });

      runs(function () {
        var layerids = mainModule.getTester().markedEditors.get(editor.id).split(',');
        var coveredLayer = editor.getMarkerLayer(layerids[0]);
        var uncoveredLayer = editor.getMarkerLayer(layerids[1]);
        expect(coveredLayer).toBeTruthy();
        expect(uncoveredLayer).toBeTruthy();

        var coveredmarkers = coveredLayer.getMarkers();
        expect(coveredmarkers).toBeDefined();
        expect(coveredmarkers.length).toBe(1);
        expect(coveredmarkers[0]).toBeDefined();
        var range = coveredmarkers[0].getBufferRange();
        expect(range.start.row).toBe(8);
        expect(range.start.column).toBe(20);
        expect(range.end.row).toBe(10);
        expect(range.end.column).toBe(1);

        var uncoveredmarkers = uncoveredLayer.getMarkers();
        expect(uncoveredmarkers).toBeDefined();
        expect(uncoveredmarkers.length).toBe(1);
        expect(uncoveredmarkers[0]).toBeDefined();
        range = uncoveredmarkers[0].getBufferRange();
        expect(range).toBeDefined();
        expect(range.start.row).toBe(4);
        expect(range.start.column).toBe(13);
        expect(range.end.row).toBe(6);
        expect(range.end.column).toBe(1);

        mainModule.getTester().clearMarkers(editor);
        expect(coveredLayer.getMarkers().length).toBe(0);
        expect(uncoveredLayer.getMarkers().length).toBe(0);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL3Rlc3Rlci1nby9zcGVjL3Rlc3Rlci1zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7b0JBR2lCLE1BQU07Ozs7b0JBQ04sTUFBTTs7OztzQkFDUixTQUFTOzs7O0FBTHhCLFdBQVcsQ0FBQTs7QUFPWCxRQUFRLENBQUMsUUFBUSxFQUFFLFlBQU07QUFDdkIsTUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFBO0FBQ3JCLE1BQUksTUFBTSxHQUFHLElBQUksQ0FBQTtBQUNqQixNQUFJLFNBQVMsR0FBRyxJQUFJLENBQUE7O0FBRXBCLFlBQVUsQ0FBQyxZQUFNO0FBQ2YsUUFBSSxDQUFDLFlBQU07QUFDVCxVQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO0FBQ3RCLGlCQUFTLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUE7T0FDL0I7QUFDRCxZQUFNLEdBQUcsa0JBQUssU0FBUyxFQUFFLENBQUE7QUFDekIsYUFBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0FBQzNCLFVBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0tBQzlCLENBQUMsQ0FBQTs7QUFFRixtQkFBZSxDQUFDLFlBQU07QUFDcEIsYUFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBTTtBQUMzRCxlQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFBO09BQ2xELENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJLEVBQUs7QUFDaEIsa0JBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFBO0FBQzVCLGVBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLENBQUE7T0FDcEQsQ0FBQyxDQUFBO0tBQ0gsQ0FBQyxDQUFBOztBQUVGLFlB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SSxDQUFDLENBQUMsQ0FBQyxDQUFBOztBQUVoQyxrQkFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQTtBQUMzQyxjQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNoRCxjQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtPQUNuRCxDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7Q0FDSCxDQUFDLENBQUEiLCJmaWxlIjoiL1VzZXJzL3NzdW4vLmF0b20vcGFja2FnZXMvdGVzdGVyLWdvL3NwZWMvdGVzdGVyLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuLyogZXNsaW50LWVudiBqYXNtaW5lICovXG5cbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgdGVtcCBmcm9tICd0ZW1wJ1xuaW1wb3J0IGZzIGZyb20gJ2ZzLXBsdXMnXG5cbmRlc2NyaWJlKCd0ZXN0ZXInLCAoKSA9PiB7XG4gIGxldCBtYWluTW9kdWxlID0gbnVsbFxuICBsZXQgZ29wYXRoID0gbnVsbFxuICBsZXQgb2xkR29wYXRoID0gbnVsbFxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHJ1bnMoKCkgPT4ge1xuICAgICAgaWYgKHByb2Nlc3MuZW52LkdPUEFUSCkge1xuICAgICAgICBvbGRHb3BhdGggPSBwcm9jZXNzLmVudi5HT1BBVEhcbiAgICAgIH1cbiAgICAgIGdvcGF0aCA9IHRlbXAubWtkaXJTeW5jKClcbiAgICAgIHByb2Nlc3MuZW52LkdPUEFUSCA9IGdvcGF0aFxuICAgICAgYXRvbS5wcm9qZWN0LnNldFBhdGhzKGdvcGF0aClcbiAgICB9KVxuXG4gICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgIHJldHVybiBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgnZ28tY29uZmlnJykudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgndGVzdGVyLWdvJylcbiAgICAgIH0pLnRoZW4oKHBhY2spID0+IHtcbiAgICAgICAgbWFpbk1vZHVsZSA9IHBhY2subWFpbk1vZHVsZVxuICAgICAgICByZXR1cm4gYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoJ2xhbmd1YWdlLWdvJylcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHdhaXRzRm9yKCgpID0+IHtcbiAgICAgIHJldHVybiBtYWluTW9kdWxlLmdldEdvY29uZmlnKCkgIT09IGZhbHNlXG4gICAgfSlcbiAgfSlcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGlmIChvbGRHb3BhdGgpIHtcbiAgICAgIHByb2Nlc3MuZW52LkdPUEFUSCA9IG9sZEdvcGF0aFxuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgcHJvY2Vzcy5lbnYuR09QQVRIXG4gICAgfVxuICB9KVxuXG4gIGRlc2NyaWJlKCd3aGVuIHJ1biBjb3ZlcmFnZSBvbiBzYXZlIGlzIGRpc2FibGVkJywgKCkgPT4ge1xuICAgIGxldCBmaWxlUGF0aFxuICAgIGxldCB0ZXN0RmlsZVBhdGhcbiAgICBsZXQgZWRpdG9yXG4gICAgbGV0IHRlc3RFZGl0b3JcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgYXRvbS5jb25maWcuc2V0KCd0ZXN0ZXItZ28ucnVuQ292ZXJhZ2VPblNhdmUnLCBmYWxzZSlcbiAgICAgIGZpbGVQYXRoID0gcGF0aC5qb2luKGdvcGF0aCwgJ3NyYycsICdnaXRodWIuY29tJywgJ3Rlc3R1c2VyJywgJ2V4YW1wbGUnLCAnZ28tcGx1cy5nbycpXG4gICAgICB0ZXN0RmlsZVBhdGggPSBwYXRoLmpvaW4oZ29wYXRoLCAnc3JjJywgJ2dpdGh1Yi5jb20nLCAndGVzdHVzZXInLCAnZXhhbXBsZScsICdnby1wbHVzX3Rlc3QuZ28nKVxuICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgJycpXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHRlc3RGaWxlUGF0aCwgJycpXG4gICAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2Uub3BlbihmaWxlUGF0aCkudGhlbigoZSkgPT4ge1xuICAgICAgICAgIGVkaXRvciA9IGVcbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICAgIHJldHVybiBhdG9tLndvcmtzcGFjZS5vcGVuKHRlc3RGaWxlUGF0aCkudGhlbigoZSkgPT4ge1xuICAgICAgICAgIHRlc3RFZGl0b3IgPSBlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgnZGlzcGxheXMgY292ZXJhZ2UgZm9yIGdvIHNvdXJjZScsICgpID0+IHtcbiAgICAgIGxldCBidWZmZXIgPSBlZGl0b3IuZ2V0QnVmZmVyKClcbiAgICAgIGJ1ZmZlci5zZXRUZXh0KCdwYWNrYWdlIG1haW5cXG5cXG5pbXBvcnQgXCJmbXRcIlxcblxcbmZ1bmMgbWFpbigpICB7XFxuXFx0Zm10LlByaW50bG4oSGVsbG8oKSlcXG59XFxuXFxuZnVuYyBIZWxsbygpIHN0cmluZyB7XFxuXFx0cmV0dXJuIFwiSGVsbG8sIOS4lueVjFwiXFxufVxcbicpXG4gICAgICBidWZmZXIuc2F2ZSgpXG4gICAgICBsZXQgdGVzdEJ1ZmZlciA9IHRlc3RFZGl0b3IuZ2V0QnVmZmVyKClcbiAgICAgIHRlc3RCdWZmZXIuc2V0VGV4dCgncGFja2FnZSBtYWluXFxuXFxuaW1wb3J0IFwidGVzdGluZ1wiXFxuXFxuZnVuYyBUZXN0SGVsbG8odCAqdGVzdGluZy5UKSB7XFxuXFx0cmVzdWx0IDo9IEhlbGxvKClcXG5cXHRpZiByZXN1bHQgIT0gXCJIZWxsbywg5LiW55WMXCIge1xcblxcdFxcdHQuRXJyb3JmKFwiRXhwZWN0ZWQgJXMgLSBnb3QgJXNcIiwgXCJIZWxsbywg5LiW55WMXCIsIHJlc3VsdClcXG5cXHR9XFxufScpXG4gICAgICB0ZXN0QnVmZmVyLnNhdmUoKVxuICAgICAgbGV0IHAgPSBtYWluTW9kdWxlLmdldFRlc3RlcigpLnJ1bkNvdmVyYWdlKGVkaXRvcilcblxuICAgICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHsgcmV0dXJuIHAgfSlcblxuICAgICAgcnVucygoKSA9PiB7XG4gICAgICAgIGxldCBsYXllcmlkcyA9IG1haW5Nb2R1bGUuZ2V0VGVzdGVyKCkubWFya2VkRWRpdG9ycy5nZXQoZWRpdG9yLmlkKS5zcGxpdCgnLCcpXG4gICAgICAgIGxldCBjb3ZlcmVkTGF5ZXIgPSBlZGl0b3IuZ2V0TWFya2VyTGF5ZXIobGF5ZXJpZHNbMF0pXG4gICAgICAgIGxldCB1bmNvdmVyZWRMYXllciA9IGVkaXRvci5nZXRNYXJrZXJMYXllcihsYXllcmlkc1sxXSlcbiAgICAgICAgZXhwZWN0KGNvdmVyZWRMYXllcikudG9CZVRydXRoeSgpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRMYXllcikudG9CZVRydXRoeSgpXG5cbiAgICAgICAgbGV0IGNvdmVyZWRtYXJrZXJzID0gY292ZXJlZExheWVyLmdldE1hcmtlcnMoKVxuICAgICAgICBleHBlY3QoY292ZXJlZG1hcmtlcnMpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KGNvdmVyZWRtYXJrZXJzLmxlbmd0aCkudG9CZSgxKVxuICAgICAgICBleHBlY3QoY292ZXJlZG1hcmtlcnNbMF0pLnRvQmVEZWZpbmVkKClcbiAgICAgICAgbGV0IHJhbmdlID0gY292ZXJlZG1hcmtlcnNbMF0uZ2V0QnVmZmVyUmFuZ2UoKVxuICAgICAgICBleHBlY3QocmFuZ2Uuc3RhcnQucm93KS50b0JlKDgpXG4gICAgICAgIGV4cGVjdChyYW5nZS5zdGFydC5jb2x1bW4pLnRvQmUoMjApXG4gICAgICAgIGV4cGVjdChyYW5nZS5lbmQucm93KS50b0JlKDEwKVxuICAgICAgICBleHBlY3QocmFuZ2UuZW5kLmNvbHVtbikudG9CZSgxKVxuXG4gICAgICAgIGxldCB1bmNvdmVyZWRtYXJrZXJzID0gdW5jb3ZlcmVkTGF5ZXIuZ2V0TWFya2VycygpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRtYXJrZXJzKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRtYXJrZXJzLmxlbmd0aCkudG9CZSgxKVxuICAgICAgICBleHBlY3QodW5jb3ZlcmVkbWFya2Vyc1swXSkudG9CZURlZmluZWQoKVxuICAgICAgICByYW5nZSA9IHVuY292ZXJlZG1hcmtlcnNbMF0uZ2V0QnVmZmVyUmFuZ2UoKVxuICAgICAgICBleHBlY3QocmFuZ2UpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJhbmdlLnN0YXJ0LnJvdykudG9CZSg0KVxuICAgICAgICBleHBlY3QocmFuZ2Uuc3RhcnQuY29sdW1uKS50b0JlKDEzKVxuICAgICAgICBleHBlY3QocmFuZ2UuZW5kLnJvdykudG9CZSg2KVxuICAgICAgICBleHBlY3QocmFuZ2UuZW5kLmNvbHVtbikudG9CZSgxKVxuICAgICAgfSlcblxuICAgICAgcCA9IG1haW5Nb2R1bGUuZ2V0VGVzdGVyKCkucnVuQ292ZXJhZ2UoZWRpdG9yKVxuXG4gICAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4geyByZXR1cm4gcCB9KVxuXG4gICAgICBydW5zKCgpID0+IHtcbiAgICAgICAgbGV0IGxheWVyaWRzID0gbWFpbk1vZHVsZS5nZXRUZXN0ZXIoKS5tYXJrZWRFZGl0b3JzLmdldChlZGl0b3IuaWQpLnNwbGl0KCcsJylcbiAgICAgICAgbGV0IGNvdmVyZWRMYXllciA9IGVkaXRvci5nZXRNYXJrZXJMYXllcihsYXllcmlkc1swXSlcbiAgICAgICAgbGV0IHVuY292ZXJlZExheWVyID0gZWRpdG9yLmdldE1hcmtlckxheWVyKGxheWVyaWRzWzFdKVxuICAgICAgICBleHBlY3QoY292ZXJlZExheWVyKS50b0JlVHJ1dGh5KClcbiAgICAgICAgZXhwZWN0KHVuY292ZXJlZExheWVyKS50b0JlVHJ1dGh5KClcblxuICAgICAgICBsZXQgY292ZXJlZG1hcmtlcnMgPSBjb3ZlcmVkTGF5ZXIuZ2V0TWFya2VycygpXG4gICAgICAgIGV4cGVjdChjb3ZlcmVkbWFya2VycykudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QoY292ZXJlZG1hcmtlcnMubGVuZ3RoKS50b0JlKDEpXG4gICAgICAgIGV4cGVjdChjb3ZlcmVkbWFya2Vyc1swXSkudG9CZURlZmluZWQoKVxuICAgICAgICBsZXQgcmFuZ2UgPSBjb3ZlcmVkbWFya2Vyc1swXS5nZXRCdWZmZXJSYW5nZSgpXG4gICAgICAgIGV4cGVjdChyYW5nZS5zdGFydC5yb3cpLnRvQmUoOClcbiAgICAgICAgZXhwZWN0KHJhbmdlLnN0YXJ0LmNvbHVtbikudG9CZSgyMClcbiAgICAgICAgZXhwZWN0KHJhbmdlLmVuZC5yb3cpLnRvQmUoMTApXG4gICAgICAgIGV4cGVjdChyYW5nZS5lbmQuY29sdW1uKS50b0JlKDEpXG5cbiAgICAgICAgbGV0IHVuY292ZXJlZG1hcmtlcnMgPSB1bmNvdmVyZWRMYXllci5nZXRNYXJrZXJzKClcbiAgICAgICAgZXhwZWN0KHVuY292ZXJlZG1hcmtlcnMpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHVuY292ZXJlZG1hcmtlcnMubGVuZ3RoKS50b0JlKDEpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRtYXJrZXJzWzBdKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIHJhbmdlID0gdW5jb3ZlcmVkbWFya2Vyc1swXS5nZXRCdWZmZXJSYW5nZSgpXG4gICAgICAgIGV4cGVjdChyYW5nZSkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QocmFuZ2Uuc3RhcnQucm93KS50b0JlKDQpXG4gICAgICAgIGV4cGVjdChyYW5nZS5zdGFydC5jb2x1bW4pLnRvQmUoMTMpXG4gICAgICAgIGV4cGVjdChyYW5nZS5lbmQucm93KS50b0JlKDYpXG4gICAgICAgIGV4cGVjdChyYW5nZS5lbmQuY29sdW1uKS50b0JlKDEpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QobWFpbk1vZHVsZSkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KG1haW5Nb2R1bGUpLnRvQmVUcnV0aHkoKVxuICAgICAgZXhwZWN0KG1haW5Nb2R1bGUuZ2V0R29jb25maWcpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChtYWluTW9kdWxlLmNvbnN1bWVHb2NvbmZpZykudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KG1haW5Nb2R1bGUuZ2V0R29jb25maWcoKSkudG9CZVRydXRoeSgpXG4gICAgICBleHBlY3QobWFpbk1vZHVsZS50ZXN0ZXIpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChtYWluTW9kdWxlLnRlc3RlcikudG9CZVRydXRoeSgpXG4gICAgfSlcblxuICAgIGl0KCdjbGVhcnMgY292ZXJhZ2UgZm9yIGdvIHNvdXJjZScsICgpID0+IHtcbiAgICAgIGxldCBidWZmZXIgPSBlZGl0b3IuZ2V0QnVmZmVyKClcbiAgICAgIGJ1ZmZlci5zZXRUZXh0KCdwYWNrYWdlIG1haW5cXG5cXG5pbXBvcnQgXCJmbXRcIlxcblxcbmZ1bmMgbWFpbigpICB7XFxuXFx0Zm10LlByaW50bG4oSGVsbG8oKSlcXG59XFxuXFxuZnVuYyBIZWxsbygpIHN0cmluZyB7XFxuXFx0cmV0dXJuIFwiSGVsbG8sIOS4lueVjFwiXFxufVxcbicpXG4gICAgICBidWZmZXIuc2F2ZSgpXG4gICAgICBsZXQgdGVzdEJ1ZmZlciA9IHRlc3RFZGl0b3IuZ2V0QnVmZmVyKClcbiAgICAgIHRlc3RCdWZmZXIuc2V0VGV4dCgncGFja2FnZSBtYWluXFxuXFxuaW1wb3J0IFwidGVzdGluZ1wiXFxuXFxuZnVuYyBUZXN0SGVsbG8odCAqdGVzdGluZy5UKSB7XFxuXFx0cmVzdWx0IDo9IEhlbGxvKClcXG5cXHRpZiByZXN1bHQgIT0gXCJIZWxsbywg5LiW55WMXCIge1xcblxcdFxcdHQuRXJyb3JmKFwiRXhwZWN0ZWQgJXMgLSBnb3QgJXNcIiwgXCJIZWxsbywg5LiW55WMXCIsIHJlc3VsdClcXG5cXHR9XFxufScpXG4gICAgICB0ZXN0QnVmZmVyLnNhdmUoKVxuICAgICAgbGV0IHAgPSBtYWluTW9kdWxlLmdldFRlc3RlcigpLnJ1bkNvdmVyYWdlKGVkaXRvcilcblxuICAgICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHsgcmV0dXJuIHAgfSlcblxuICAgICAgcnVucygoKSA9PiB7XG4gICAgICAgIGxldCBsYXllcmlkcyA9IG1haW5Nb2R1bGUuZ2V0VGVzdGVyKCkubWFya2VkRWRpdG9ycy5nZXQoZWRpdG9yLmlkKS5zcGxpdCgnLCcpXG4gICAgICAgIGxldCBjb3ZlcmVkTGF5ZXIgPSBlZGl0b3IuZ2V0TWFya2VyTGF5ZXIobGF5ZXJpZHNbMF0pXG4gICAgICAgIGxldCB1bmNvdmVyZWRMYXllciA9IGVkaXRvci5nZXRNYXJrZXJMYXllcihsYXllcmlkc1sxXSlcbiAgICAgICAgZXhwZWN0KGNvdmVyZWRMYXllcikudG9CZVRydXRoeSgpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRMYXllcikudG9CZVRydXRoeSgpXG5cbiAgICAgICAgbGV0IGNvdmVyZWRtYXJrZXJzID0gY292ZXJlZExheWVyLmdldE1hcmtlcnMoKVxuICAgICAgICBleHBlY3QoY292ZXJlZG1hcmtlcnMpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KGNvdmVyZWRtYXJrZXJzLmxlbmd0aCkudG9CZSgxKVxuICAgICAgICBleHBlY3QoY292ZXJlZG1hcmtlcnNbMF0pLnRvQmVEZWZpbmVkKClcbiAgICAgICAgbGV0IHJhbmdlID0gY292ZXJlZG1hcmtlcnNbMF0uZ2V0QnVmZmVyUmFuZ2UoKVxuICAgICAgICBleHBlY3QocmFuZ2Uuc3RhcnQucm93KS50b0JlKDgpXG4gICAgICAgIGV4cGVjdChyYW5nZS5zdGFydC5jb2x1bW4pLnRvQmUoMjApXG4gICAgICAgIGV4cGVjdChyYW5nZS5lbmQucm93KS50b0JlKDEwKVxuICAgICAgICBleHBlY3QocmFuZ2UuZW5kLmNvbHVtbikudG9CZSgxKVxuXG4gICAgICAgIGxldCB1bmNvdmVyZWRtYXJrZXJzID0gdW5jb3ZlcmVkTGF5ZXIuZ2V0TWFya2VycygpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRtYXJrZXJzKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRtYXJrZXJzLmxlbmd0aCkudG9CZSgxKVxuICAgICAgICBleHBlY3QodW5jb3ZlcmVkbWFya2Vyc1swXSkudG9CZURlZmluZWQoKVxuICAgICAgICByYW5nZSA9IHVuY292ZXJlZG1hcmtlcnNbMF0uZ2V0QnVmZmVyUmFuZ2UoKVxuICAgICAgICBleHBlY3QocmFuZ2UpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJhbmdlLnN0YXJ0LnJvdykudG9CZSg0KVxuICAgICAgICBleHBlY3QocmFuZ2Uuc3RhcnQuY29sdW1uKS50b0JlKDEzKVxuICAgICAgICBleHBlY3QocmFuZ2UuZW5kLnJvdykudG9CZSg2KVxuICAgICAgICBleHBlY3QocmFuZ2UuZW5kLmNvbHVtbikudG9CZSgxKVxuXG4gICAgICAgIG1haW5Nb2R1bGUuZ2V0VGVzdGVyKCkuY2xlYXJNYXJrZXJzKGVkaXRvcilcbiAgICAgICAgZXhwZWN0KGNvdmVyZWRMYXllci5nZXRNYXJrZXJzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICAgIGV4cGVjdCh1bmNvdmVyZWRMYXllci5nZXRNYXJrZXJzKCkubGVuZ3RoKS50b0JlKDApXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59KVxuIl19
//# sourceURL=/Users/ssun/.atom/packages/tester-go/spec/tester-spec.js
