Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.init = init;
exports.dispose = dispose;
exports.serialize = serialize;
exports.indexOfBreakpoint = indexOfBreakpoint;
exports.getBreakpoint = getBreakpoint;
exports.getBreakpoints = getBreakpoints;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var _redux = require('redux');

'use babel';

var assign = function assign() {
  for (var _len = arguments.length, items = Array(_len), _key = 0; _key < _len; _key++) {
    items[_key] = arguments[_key];
  }

  return Object.assign.apply(Object, [{}].concat(items));
};

function updateArrayItem(array, index, o) {
  return array.slice(0, index).concat(assign(array[index], o), array.slice(index + 1));
}

function stacktrace(state, action) {
  if (state === undefined) state = [];

  switch (action.type) {
    case 'RESTART':
    case 'STOP':
      return [];

    case 'UPDATE_STACKTRACE':
      // attempt to copy the variables over to the new stacktrace
      return action.stacktrace.map(function (stack) {
        var existingStack = state.find(function (st) {
          return st.pc === stack.pc;
        });
        if (!stack.variables && existingStack) {
          stack.variables = existingStack.variables;
        }
        return stack;
      });

    case 'UPDATE_VARIABLES':
      var variables = state[action.index].variables;
      if (action.path) {
        // update the variable at 'path' to loaded
        variables = assign(variables, _defineProperty({}, action.path, assign(variables[action.path], { loaded: true })));
      }

      // TODO: update each variable in action.variables on its own? probably...
      variables = assign(variables, action.variables);
      return updateArrayItem(state, action.index, { variables: variables });
  }
  return state;
}
function goroutines(state, action) {
  if (state === undefined) state = [];

  switch (action.type) {
    case 'RESTART':
    case 'STOP':
      return [];

    case 'UPDATE_GOROUTINES':
      return action.goroutines;
  }
  return state;
}
function breakpoints(state, action) {
  if (state === undefined) state = [];
  var bp = action.bp;

  var _ref = bp || {};

  var file = _ref.file;
  var line = _ref.line;

  var index = indexOfBreakpoint(state, file, line);
  switch (action.type) {
    case 'ADD_BREAKPOINT':
      if (index === -1) {
        return state.concat(bp).sort(function (a, b) {
          var s = a.file.localeCompare(b.file);
          return s !== 0 ? s : a.line - b.line;
        });
      }
      return updateArrayItem(state, index, bp);

    case 'REMOVE_BREAKPOINT':
      if (bp.state !== 'busy') {
        return index === -1 ? state : state.slice(0, index).concat(state.slice(index + 1));
      }
      return updateArrayItem(state, index, bp);

    case 'UPDATE_BREAKPOINT_LINE':
      if (index !== -1) {
        return updateArrayItem(state, index, { line: action.newLine });
      }
      return state;

    case 'STOP':
      return state.map(function (_ref2) {
        var file = _ref2.file;
        var line = _ref2.line;

        return { file: file, line: line, state: 'notStarted' };
      });
  }

  return state;
}
function state(state, action) {
  if (state === undefined) state = 'notStarted';

  switch (action.type) {
    case 'STOP':
      return 'notStarted';

    case 'RESTART':
      return 'started';

    case 'SET_STATE':
      return action.state;

    case 'SET_SELECTED_GOROUTINE':
      return action.state;
  }
  return state;
}
function selectedStacktrace(state, action) {
  if (state === undefined) state = 0;

  switch (action.type) {
    case 'RESTART':
    case 'STOP':
      return 0;

    case 'SET_SELECTED_STACKTRACE':
      return action.index;

    case 'UPDATE_STACKTRACE':
      return 0; // set back to the first function on each update
  }
  return state;
}
function selectedGoroutine(state, action) {
  if (state === undefined) state = 0;

  switch (action.type) {
    case 'RESTART':
    case 'STOP':
      return 0;

    case 'SET_SELECTED_GOROUTINE':
      return action.id;
  }
  return state;
}
function args(state, action) {
  if (state === undefined) state = '';

  if (action.type === 'UPDATE_ARGS') {
    return action.args;
  }
  return state;
}
function path(state, action) {
  if (state === undefined) state = '';

  if (action.type === 'SET_DLV_PATH') {
    return action.path;
  }
  return state;
}

function fileOverride(state, action) {
  if (state === undefined) state = '';

  if (action.type === 'UPDATE_FILE_OVERRIDE') {
    return action.fileOverride;
  }
  return state;
}

var delve = (0, _redux.combineReducers)({
  stacktrace: stacktrace,
  goroutines: goroutines,
  breakpoints: breakpoints,
  state: state,
  selectedStacktrace: selectedStacktrace,
  selectedGoroutine: selectedGoroutine,
  args: args,
  fileOverride: fileOverride,
  path: path
});

function editors(state, action) {
  if (state === undefined) state = {};

  void action;
  return state;
}
var getDefaultPanel = function getDefaultPanel() {
  return { visible: atom.config.get('go-debug.panelInitialVisible') };
};
function panel(state, action) {
  if (!state) {
    state = getDefaultPanel();
  }
  switch (action.type) {
    case 'TOGGLE_PANEL':
      return assign(state, { visible: 'visible' in action ? action.visible : !state.visible });

    case 'SET_PANEL_WIDTH':
      return assign(state, { width: action.width });
  }
  return state;
}
var defaultOutput = {
  messages: [],
  visible: false,
  filters: { delve: true, output: true }
};
function output(state, action) {
  if (state === undefined) state = defaultOutput;

  switch (action.type) {
    case 'TOGGLE_OUTPUT':
      return assign(state, { visible: 'visible' in action ? action.visible : !state.visible });

    case 'CLEAN_OUTPUT':
      return assign(state, { messages: [] });

    case 'ADD_OUTPUT_MESSAGE':
      {
        var messages = state.messages.concat({ message: action.message, type: action.messageType });
        return assign(state, { messages: messages });
      }

    case 'TOGGLE_OUTPUT_FILTER':
      return assign(state, {
        filters: assign(state.filters, _defineProperty({}, action.filter, !state.filters[action.filter]))
      });
  }
  return state;
}
function variables(state, action) {
  if (state === undefined) state = { expanded: {} };

  switch (action.type) {
    case 'TOGGLE_VARIABLE':
      var expanded = assign(state.expanded, _defineProperty({}, action.path, 'expanded' in action ? action.expanded : !state.expanded[action.path]));
      return assign(state, { expanded: expanded });
  }
  return state;
}

var store = undefined;

exports.store = store;

function init(state) {
  if (state.breakpoints) {
    state.delve = { breakpoints: state.breakpoints };
    delete state.breakpoints;
  }
  state.panel = assign(getDefaultPanel(), state.panel);

  exports.store = store = (0, _redux.createStore)((0, _redux.combineReducers)({
    editors: editors,
    panel: panel,
    delve: delve,
    output: output,
    variables: variables
  }), state);
}

function dispose() {
  exports.store = store = null;
}

function serialize() {
  var state = store.getState();
  return {
    panel: state.panel,
    delve: {
      breakpoints: state.delve.breakpoints.map(function (_ref3) {
        var file = _ref3.file;
        var line = _ref3.line;
        return { file: file, line: line };
      }),
      args: state.delve.args,
      fileOverride: state.delve.fileOverride
    }
  };
}

function indexOfBreakpoint(bps, file, line) {
  return bps.findIndex(function (bp) {
    return bp.file === file && bp.line === line;
  });
}

function getBreakpoint(file, line) {
  var bps = store.getState().delve.breakpoints;
  var index = indexOfBreakpoint(bps, file, line);
  return index === -1 ? null : bps[index];
}

function getBreakpoints(file) {
  var bps = store.getState().delve.breakpoints;
  return !file ? bps : bps.filter(function (bp) {
    return bp.file === file;
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2dvLWRlYnVnL2xpYi9zdG9yZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7cUJBRTZDLE9BQU87O0FBRnBELFdBQVcsQ0FBQTs7QUFHWCxJQUFNLE1BQU0sR0FBRyxTQUFULE1BQU07b0NBQU8sS0FBSztBQUFMLFNBQUs7OztTQUFLLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztDQUFBLENBQUE7O0FBRTVFLFNBQVMsZUFBZSxDQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO0FBQ3pDLFNBQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUNqQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUN2QixLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FDdkIsQ0FBQTtDQUNGOztBQUVELFNBQVMsVUFBVSxDQUFFLEtBQUssRUFBTyxNQUFNLEVBQUU7TUFBcEIsS0FBSyxnQkFBTCxLQUFLLEdBQUcsRUFBRTs7QUFDN0IsVUFBUSxNQUFNLENBQUMsSUFBSTtBQUNqQixTQUFLLFNBQVMsQ0FBQztBQUNmLFNBQUssTUFBTTtBQUNULGFBQU8sRUFBRSxDQUFBOztBQUFBLEFBRVgsU0FBSyxtQkFBbUI7O0FBRXRCLGFBQU8sTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBQyxLQUFLLEVBQUs7QUFDdEMsWUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFDLEVBQUU7aUJBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsRUFBRTtTQUFBLENBQUMsQ0FBQTtBQUM1RCxZQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsSUFBSSxh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QUFPLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQUMsRUFBRTtXQUFLLEVBQUUsQ0FBQyxJQUFJLEtBQUssSUFBSTtHQUFBLENBQUMsQ0FBQTtDQUMxRCIsImZpbGUiOiIvVXNlcnMvc3N1bi8uYXRvbS9wYWNrYWdlcy9nby1kZWJ1Zy9saWIvc3RvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuXG5pbXBvcnQgeyBjcmVhdGVTdG9yZSwgY29tYmluZVJlZHVjZXJzIH0gZnJvbSAncmVkdXgnXG5jb25zdCBhc3NpZ24gPSAoLi4uaXRlbXMpID0+IE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBbe31dLmNvbmNhdChpdGVtcykpXG5cbmZ1bmN0aW9uIHVwZGF0ZUFycmF5SXRlbSAoYXJyYXksIGluZGV4LCBvKSB7XG4gIHJldHVybiBhcnJheS5zbGljZSgwLCBpbmRleCkuY29uY2F0KFxuICAgIGFzc2lnbihhcnJheVtpbmRleF0sIG8pLFxuICAgIGFycmF5LnNsaWNlKGluZGV4ICsgMSlcbiAgKVxufVxuXG5mdW5jdGlvbiBzdGFja3RyYWNlIChzdGF0ZSA9IFtdLCBhY3Rpb24pIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ1JFU1RBUlQnOlxuICAgIGNhc2UgJ1NUT1AnOlxuICAgICAgcmV0dXJuIFtdXG5cbiAgICBjYXNlICdVUERBVEVfU1RBQ0tUUkFDRSc6XG4gICAgICAvLyBhdHRlbXB0IHRvIGNvcHkgdGhlIHZhcmlhYmxlcyBvdmVyIHRvIHRoZSBuZXcgc3RhY2t0cmFjZVxuICAgICAgcmV0dXJuIGFjdGlvbi5zdGFja3RyYWNlLm1hcCgoc3RhY2spID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTdGFjayA9IHN0YXRlLmZpbmQoKHN0KSA9PiBzdC5wYyA9PT0gc3RhY2sucGMpXG4gICAgICAgIGlmICghc3RhY2sudmFyaWFibGVzICYmIGV4aXN0aW5nU3RhY2spIHtcbiAgICAgICAgICBzdGFjay52YXJpYWJsZXMgPSBleGlzdGluZ1N0YWNrLnZhcmlhYmxlc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFja1xuICAgICAgfSlcblxuICAgIGNhc2UgJ1VQREFURV9WQVJJQUJMRVMnOlxuICAgICAgdmFyIHZhcmlhYmxlcyA9IHN0YXRlW2FjdGlvbi5pbmRleF0udmFyaWFibGVzXG4gICAgICBpZiAoYWN0aW9uLnBhdGgpIHtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSB2YXJpYWJsZSBhdCAncGF0aCcgdG8gbG9hZGVkXG4gICAgICAgIHZhcmlhYmxlcyA9IGFzc2lnbih2YXJpYWJsZXMsIHtcbiAgICAgICAgICBbYWN0aW9uLnBhdGhdOiBhc3NpZ24odmFyaWFibGVzW2FjdGlvbi5wYXRoXSwgeyBsb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogdXBkYXRlIGVhY2ggdmFyaWFibGUgaW4gYWN0aW9uLnZhcmlhYmxlcyBvbiBpdHMgb3duPyBwcm9iYWJseS4uLlxuICAgICAgdmFyaWFibGVzID0gYXNzaWduKHZhcmlhYmxlcywgYWN0aW9uLnZhcmlhYmxlcylcbiAgICAgIHJldHVybiB1cGRhdGVBcnJheUl0ZW0oc3RhdGUsIGFjdGlvbi5pbmRleCwgeyB2YXJpYWJsZXM6IHZhcmlhYmxlcyB9KVxuICB9XG4gIHJldHVybiBzdGF0ZVxufVxuZnVuY3Rpb24gZ29yb3V0aW5lcyAoc3RhdGUgPSBbXSwgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdSRVNUQVJUJzpcbiAgICBjYXNlICdTVE9QJzpcbiAgICAgIHJldHVybiBbXVxuXG4gICAgY2FzZSAnVVBEQVRFX0dPUk9VVElORVMnOlxuICAgICAgcmV0dXJuIGFjdGlvbi5nb3JvdXRpbmVzXG4gIH1cbiAgcmV0dXJuIHN0YXRlXG59XG5mdW5jdGlvbiBicmVha3BvaW50cyAoc3RhdGUgPSBbXSwgYWN0aW9uKSB7XG4gIGNvbnN0IHsgYnAgfSA9IGFjdGlvblxuICBjb25zdCB7IGZpbGUsIGxpbmUgfSA9IGJwIHx8IHt9XG4gIGNvbnN0IGluZGV4ID0gaW5kZXhPZkJyZWFrcG9pbnQoc3RhdGUsIGZpbGUsIGxpbmUpXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdBRERfQlJFQUtQT0lOVCc6XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5jb25jYXQoYnApLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICBjb25zdCBzID0gYS5maWxlLmxvY2FsZUNvbXBhcmUoYi5maWxlKVxuICAgICAgICAgIHJldHVybiBzICE9PSAwID8gcyA6IChhLmxpbmUgLSBiLmxpbmUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gdXBkYXRlQXJyYXlJdGVtKHN0YXRlLCBpbmRleCwgYnApXG5cbiAgICBjYXNlICdSRU1PVkVfQlJFQUtQT0lOVCc6XG4gICAgICBpZiAoYnAuc3RhdGUgIT09ICdidXN5Jykge1xuICAgICAgICByZXR1cm4gaW5kZXggPT09IC0xID8gc3RhdGUgOiBzdGF0ZS5zbGljZSgwLCBpbmRleCkuY29uY2F0KHN0YXRlLnNsaWNlKGluZGV4ICsgMSkpXG4gICAgICB9XG4gICAgICByZXR1cm4gdXBkYXRlQXJyYXlJdGVtKHN0YXRlLCBpbmRleCwgYnApXG5cbiAgICBjYXNlICdVUERBVEVfQlJFQUtQT0lOVF9MSU5FJzpcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUFycmF5SXRlbShzdGF0ZSwgaW5kZXgsIHsgbGluZTogYWN0aW9uLm5ld0xpbmUgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZVxuXG4gICAgY2FzZSAnU1RPUCc6XG4gICAgICByZXR1cm4gc3RhdGUubWFwKCh7IGZpbGUsIGxpbmUgfSkgPT4ge1xuICAgICAgICByZXR1cm4geyBmaWxlLCBsaW5lLCBzdGF0ZTogJ25vdFN0YXJ0ZWQnIH1cbiAgICAgIH0pXG4gIH1cblxuICByZXR1cm4gc3RhdGVcbn1cbmZ1bmN0aW9uIHN0YXRlIChzdGF0ZSA9ICdub3RTdGFydGVkJywgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdTVE9QJzpcbiAgICAgIHJldHVybiAnbm90U3RhcnRlZCdcblxuICAgIGNhc2UgJ1JFU1RBUlQnOlxuICAgICAgcmV0dXJuICdzdGFydGVkJ1xuXG4gICAgY2FzZSAnU0VUX1NUQVRFJzpcbiAgICAgIHJldHVybiBhY3Rpb24uc3RhdGVcblxuICAgIGNhc2UgJ1NFVF9TRUxFQ1RFRF9HT1JPVVRJTkUnOlxuICAgICAgcmV0dXJuIGFjdGlvbi5zdGF0ZVxuICB9XG4gIHJldHVybiBzdGF0ZVxufVxuZnVuY3Rpb24gc2VsZWN0ZWRTdGFja3RyYWNlIChzdGF0ZSA9IDAsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnUkVTVEFSVCc6XG4gICAgY2FzZSAnU1RPUCc6XG4gICAgICByZXR1cm4gMFxuXG4gICAgY2FzZSAnU0VUX1NFTEVDVEVEX1NUQUNLVFJBQ0UnOlxuICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleFxuXG4gICAgY2FzZSAnVVBEQVRFX1NUQUNLVFJBQ0UnOlxuICAgICAgcmV0dXJuIDAgLy8gc2V0IGJhY2sgdG8gdGhlIGZpcnN0IGZ1bmN0aW9uIG9uIGVhY2ggdXBkYXRlXG4gIH1cbiAgcmV0dXJuIHN0YXRlXG59XG5mdW5jdGlvbiBzZWxlY3RlZEdvcm91dGluZSAoc3RhdGUgPSAwLCBhY3Rpb24pIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ1JFU1RBUlQnOlxuICAgIGNhc2UgJ1NUT1AnOlxuICAgICAgcmV0dXJuIDBcblxuICAgIGNhc2UgJ1NFVF9TRUxFQ1RFRF9HT1JPVVRJTkUnOlxuICAgICAgcmV0dXJuIGFjdGlvbi5pZFxuICB9XG4gIHJldHVybiBzdGF0ZVxufVxuZnVuY3Rpb24gYXJncyAoc3RhdGUgPSAnJywgYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gJ1VQREFURV9BUkdTJykge1xuICAgIHJldHVybiBhY3Rpb24uYXJnc1xuICB9XG4gIHJldHVybiBzdGF0ZVxufVxuZnVuY3Rpb24gcGF0aCAoc3RhdGUgPSAnJywgYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gJ1NFVF9ETFZfUEFUSCcpIHtcbiAgICByZXR1cm4gYWN0aW9uLnBhdGhcbiAgfVxuICByZXR1cm4gc3RhdGVcbn1cblxuZnVuY3Rpb24gZmlsZU92ZXJyaWRlIChzdGF0ZSA9ICcnLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi50eXBlID09PSAnVVBEQVRFX0ZJTEVfT1ZFUlJJREUnKSB7XG4gICAgcmV0dXJuIGFjdGlvbi5maWxlT3ZlcnJpZGVcbiAgfVxuICByZXR1cm4gc3RhdGVcbn1cblxuY29uc3QgZGVsdmUgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBzdGFja3RyYWNlLFxuICBnb3JvdXRpbmVzLFxuICBicmVha3BvaW50cyxcbiAgc3RhdGUsXG4gIHNlbGVjdGVkU3RhY2t0cmFjZSxcbiAgc2VsZWN0ZWRHb3JvdXRpbmUsXG4gIGFyZ3MsXG4gIGZpbGVPdmVycmlkZSxcbiAgcGF0aFxufSlcblxuZnVuY3Rpb24gZWRpdG9ycyAoc3RhdGUgPSB7fSwgYWN0aW9uKSB7XG4gIHZvaWQgYWN0aW9uXG4gIHJldHVybiBzdGF0ZVxufVxuY29uc3QgZ2V0RGVmYXVsdFBhbmVsID0gKCkgPT4ge1xuICByZXR1cm4geyB2aXNpYmxlOiBhdG9tLmNvbmZpZy5nZXQoJ2dvLWRlYnVnLnBhbmVsSW5pdGlhbFZpc2libGUnKSB9XG59XG5mdW5jdGlvbiBwYW5lbCAoc3RhdGUsIGFjdGlvbikge1xuICBpZiAoIXN0YXRlKSB7XG4gICAgc3RhdGUgPSBnZXREZWZhdWx0UGFuZWwoKVxuICB9XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdUT0dHTEVfUEFORUwnOlxuICAgICAgcmV0dXJuIGFzc2lnbihzdGF0ZSwgeyB2aXNpYmxlOiAndmlzaWJsZScgaW4gYWN0aW9uID8gYWN0aW9uLnZpc2libGUgOiAhc3RhdGUudmlzaWJsZSB9KVxuXG4gICAgY2FzZSAnU0VUX1BBTkVMX1dJRFRIJzpcbiAgICAgIHJldHVybiBhc3NpZ24oc3RhdGUsIHsgd2lkdGg6IGFjdGlvbi53aWR0aCB9KVxuICB9XG4gIHJldHVybiBzdGF0ZVxufVxuY29uc3QgZGVmYXVsdE91dHB1dCA9IHtcbiAgbWVzc2FnZXM6IFtdLFxuICB2aXNpYmxlOiBmYWxzZSxcbiAgZmlsdGVyczogeyBkZWx2ZTogdHJ1ZSwgb3V0cHV0OiB0cnVlIH1cbn1cbmZ1bmN0aW9uIG91dHB1dCAoc3RhdGUgPSBkZWZhdWx0T3V0cHV0LCBhY3Rpb24pIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ1RPR0dMRV9PVVRQVVQnOlxuICAgICAgcmV0dXJuIGFzc2lnbihzdGF0ZSwgeyB2aXNpYmxlOiAndmlzaWJsZScgaW4gYWN0aW9uID8gYWN0aW9uLnZpc2libGUgOiAhc3RhdGUudmlzaWJsZSB9KVxuXG4gICAgY2FzZSAnQ0xFQU5fT1VUUFVUJzpcbiAgICAgIHJldHVybiBhc3NpZ24oc3RhdGUsIHsgbWVzc2FnZXM6IFtdIH0pXG5cbiAgICBjYXNlICdBRERfT1VUUFVUX01FU1NBR0UnOiB7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHN0YXRlLm1lc3NhZ2VzLmNvbmNhdCh7IG1lc3NhZ2U6IGFjdGlvbi5tZXNzYWdlLCB0eXBlOiBhY3Rpb24ubWVzc2FnZVR5cGUgfSlcbiAgICAgIHJldHVybiBhc3NpZ24oc3RhdGUsIHsgbWVzc2FnZXM6IG1lc3NhZ2VzIH0pXG4gICAgfVxuXG4gICAgY2FzZSAnVE9HR0xFX09VVFBVVF9GSUxURVInOlxuICAgICAgcmV0dXJuIGFzc2lnbihzdGF0ZSwge1xuICAgICAgICBmaWx0ZXJzOiBhc3NpZ24oc3RhdGUuZmlsdGVycywge1xuICAgICAgICAgIFthY3Rpb24uZmlsdGVyXTogIXN0YXRlLmZpbHRlcnNbYWN0aW9uLmZpbHRlcl1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gIH1cbiAgcmV0dXJuIHN0YXRlXG59XG5mdW5jdGlvbiB2YXJpYWJsZXMgKHN0YXRlID0geyBleHBhbmRlZDoge30gfSwgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlICdUT0dHTEVfVkFSSUFCTEUnOlxuICAgICAgdmFyIGV4cGFuZGVkID0gYXNzaWduKHN0YXRlLmV4cGFuZGVkLCB7XG4gICAgICAgIFthY3Rpb24ucGF0aF06ICdleHBhbmRlZCcgaW4gYWN0aW9uID8gYWN0aW9uLmV4cGFuZGVkIDogIXN0YXRlLmV4cGFuZGVkW2FjdGlvbi5wYXRoXVxuICAgICAgfSlcbiAgICAgIHJldHVybiBhc3NpZ24oc3RhdGUsIHsgZXhwYW5kZWQgfSlcbiAgfVxuICByZXR1cm4gc3RhdGVcbn1cblxuZXhwb3J0IGxldCBzdG9yZVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCAoc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmJyZWFrcG9pbnRzKSB7XG4gICAgc3RhdGUuZGVsdmUgPSB7IGJyZWFrcG9pbnRzOiBzdGF0ZS5icmVha3BvaW50cyB9XG4gICAgZGVsZXRlIHN0YXRlLmJyZWFrcG9pbnRzXG4gIH1cbiAgc3RhdGUucGFuZWwgPSBhc3NpZ24oZ2V0RGVmYXVsdFBhbmVsKCksIHN0YXRlLnBhbmVsKVxuXG4gIHN0b3JlID0gY3JlYXRlU3RvcmUoY29tYmluZVJlZHVjZXJzKHtcbiAgICBlZGl0b3JzLFxuICAgIHBhbmVsLFxuICAgIGRlbHZlLFxuICAgIG91dHB1dCxcbiAgICB2YXJpYWJsZXNcbiAgfSksIHN0YXRlKVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2UgKCkge1xuICBzdG9yZSA9IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZSAoKSB7XG4gIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKVxuICByZXR1cm4ge1xuICAgIHBhbmVsOiBzdGF0ZS5wYW5lbCxcbiAgICBkZWx2ZToge1xuICAgICAgYnJlYWtwb2ludHM6IHN0YXRlLmRlbHZlLmJyZWFrcG9pbnRzLm1hcCgoeyBmaWxlLCBsaW5lIH0pID0+IHsgcmV0dXJuIHsgZmlsZSwgbGluZSB9IH0pLFxuICAgICAgYXJnczogc3RhdGUuZGVsdmUuYXJncyxcbiAgICAgIGZpbGVPdmVycmlkZTogc3RhdGUuZGVsdmUuZmlsZU92ZXJyaWRlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmRleE9mQnJlYWtwb2ludCAoYnBzLCBmaWxlLCBsaW5lKSB7XG4gIHJldHVybiBicHMuZmluZEluZGV4KChicCkgPT4gYnAuZmlsZSA9PT0gZmlsZSAmJiBicC5saW5lID09PSBsaW5lKVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEJyZWFrcG9pbnQgKGZpbGUsIGxpbmUpIHtcbiAgY29uc3QgYnBzID0gc3RvcmUuZ2V0U3RhdGUoKS5kZWx2ZS5icmVha3BvaW50c1xuICBjb25zdCBpbmRleCA9IGluZGV4T2ZCcmVha3BvaW50KGJwcywgZmlsZSwgbGluZSlcbiAgcmV0dXJuIGluZGV4ID09PSAtMSA/IG51bGwgOiBicHNbaW5kZXhdXG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJlYWtwb2ludHMgKGZpbGUpIHtcbiAgY29uc3QgYnBzID0gc3RvcmUuZ2V0U3RhdGUoKS5kZWx2ZS5icmVha3BvaW50c1xuICByZXR1cm4gIWZpbGUgPyBicHMgOiBicHMuZmlsdGVyKChicCkgPT4gYnAuZmlsZSA9PT0gZmlsZSlcbn1cbiJdfQ==
//# sourceURL=/Users/ssun/.atom/packages/go-debug/lib/store.js
