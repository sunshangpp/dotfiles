(function() {
  var Environment, os, path, _;

  _ = require('underscore-plus');

  path = require('path');

  os = require('os');

  Environment = require('./../lib/environment');

  describe('executor', function() {
    var environment;
    environment = [][0];
    describe('when the DYLD_INSERT_LIBRARIES variable is not set', function() {
      beforeEach(function() {
        var env;
        env = _.clone(process.env);
        env.PATH = '/usr/bin:/bin:/usr/sbin:/sbin';
        return environment = new Environment(env);
      });
      describe('when cloning the environment on OS X', function() {
        return it('uses /usr/libexec/path_helper to build the PATH', function() {
          var env;
          if (os.platform() === 'darwin') {
            env = environment.Clone();
            expect(env).toBeDefined();
            expect(env.PATH).toBeDefined();
            expect(env.PATH).not.toBe('');
            return expect(env.PATH).not.toBe('/usr/bin:/bin:/usr/sbin:/sbin');
          }
        });
      });
      return it('the DYLD_INSERT_LIBRARIES variable is undefined', function() {
        var env;
        env = environment.Clone();
        expect(env).toBeDefined();
        expect(env.SOME_RANDOM_NONEXISTENT_VARIABLE).toBe(void 0);
        return expect(env.DYLD_INSERT_LIBRARIES).toBe(void 0);
      });
    });
    return describe('when the DYLD_INSERT_LIBRARIES variable is set', function() {
      beforeEach(function() {
        var env;
        env = _.clone(process.env);
        env.PATH = '/usr/bin:/bin:/usr/sbin:/sbin';
        env.DYLD_INSERT_LIBRARIES = '/path/to/some/library';
        return environment = new Environment(env);
      });
      return it('unsets the DYLD_INSERT_LIBRARIES variable', function() {
        var env;
        env = environment.Clone();
        expect(env).toBeDefined();
        expect(env.SOME_RANDOM_NONEXISTENT_VARIABLE).toBe(void 0);
        return expect(env.DYLD_INSERT_LIBRARIES).toBe(void 0);
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL3NzdW4vLmF0b20vcGFja2FnZXMvZ28tcGx1cy9zcGVjL2Vudmlyb25tZW50LXNwZWMuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIkFBQUE7QUFBQSxNQUFBLHdCQUFBOztBQUFBLEVBQUEsQ0FBQSxHQUFJLE9BQUEsQ0FBUSxpQkFBUixDQUFKLENBQUE7O0FBQUEsRUFDQSxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVIsQ0FEUCxDQUFBOztBQUFBLEVBRUEsRUFBQSxHQUFLLE9BQUEsQ0FBUSxJQUFSLENBRkwsQ0FBQTs7QUFBQSxFQUdBLFdBQUEsR0FBYyxPQUFBLENBQVEsc0JBQVIsQ0FIZCxDQUFBOztBQUFBLEVBS0EsUUFBQSxDQUFTLFVBQVQsRUFBcUIsU0FBQSxHQUFBO0FBQ25CLFFBQUEsV0FBQTtBQUFBLElBQUMsY0FBZSxLQUFoQixDQUFBO0FBQUEsSUFFQSxRQUFBLENBQVMsb0RBQVQsRUFBK0QsU0FBQSxHQUFBO0FBQzdELE1BQUEsVUFBQSxDQUFXLFNBQUEsR0FBQTtBQUNULFlBQUEsR0FBQTtBQUFBLFFBQUEsR0FBQSxHQUFNLENBQUMsQ0FBQyxLQUFGLENBQVEsT0FBTyxDQUFDLEdBQWhCLENBQU4sQ0FBQTtBQUFBLFFBQ0EsR0FBRyxDQUFDLElBQUosR0FBVywrQkFEWCxDQUFBO2VBRUEsV0FBQSxHQUFrQixJQUFBLFdBQUEsQ0FBWSxHQUFaLEVBSFQ7TUFBQSxDQUFYLENBQUEsQ0FBQTtBQUFBLE1BS0EsUUFBQSxDQUFTLHNDQUFULEVBQWlELFNBQUEsR0FBQTtlQUMvQyxFQUFBLENBQUcsaURBQUgsRUFBc0QsU0FBQSxHQUFBO0FBQ3BELGNBQUEsR0FBQTtBQUFBLFVBQUEsSUFBRyxFQUFFLENBQUMsUUFBSCxDQUFBLENBQUEsS0FBaUIsUUFBcEI7QUFDRSxZQUFBLEdBQUEsR0FBTSxXQUFXLENBQUMsS0FBWixDQUFBLENBQU4sQ0FBQTtBQUFBLFlBQ0EsTUFBQSxDQUFPLEdBQVAsQ0FBVyxDQUFDLFdBQVosQ0FBQSxDQURBLENBQUE7QUFBQSxZQUVBLE1BQUEsQ0FBTyxHQUFHLENBQUMsSUFBWCxDQUFnQixDQUFDLFdBQWpCLENBQUEsQ0FGQSxDQUFBO0FBQUEsWUFHQSxNQUFBLENBQU8sR0FBRyxDQUFDLElBQVgsQ0FBZ0IsQ0FBQyxHQUFHLENBQUMsSUFBckIsQ0FBMEIsRUFBMUIsQ0FIQSxDQUFBO21CQUlBLE1BQUEsQ0FBTyxHQUFHLENBQUMsSUFBWCxDQUFnQixDQUFDLEdBQUcsQ0FBQyxJQUFyQixDQUEwQiwrQkFBMUIsRUFMRjtXQURvRDtRQUFBLENBQXRELEVBRCtDO01BQUEsQ0FBakQsQ0FMQSxDQUFBO2FBY0EsRUFBQSxDQUFHLGlEQUFILEVBQXNELFNBQUEsR0FBQTtBQUNwRCxZQUFBLEdBQUE7QUFBQSxRQUFBLEdBQUEsR0FBTSxXQUFXLENBQUMsS0FBWixDQUFBLENBQU4sQ0FBQTtBQUFBLFFBQ0EsTUFBQSxDQUFPLEdBQVAsQ0FBVyxDQUFDLFdBQVosQ0FBQSxDQURBLENBQUE7QUFBQSxRQUVBLE1BQUEsQ0FBTyxHQUFHLENBQUMsZ0NBQVgsQ0FBNEMsQ0FBQyxJQUE3QyxDQUFrRCxNQUFsRCxDQUZBLENBQUE7ZUFHQSxNQUFBLENBQU8sR0FBRyxDQUFDLHFCQUFYLENBQWlDLENBQUMsSUFBbEMsQ0FBdUMsTUFBdkMsRUFKb0Q7TUFBQSxDQUF0RCxFQWY2RDtJQUFBLENBQS9ELENBRkEsQ0FBQTtXQXVCQSxRQUFBLENBQVMsZ0RBQVQsRUFBMkQsU0FBQSxHQUFBO0FBQ3pELE1BQUEsVUFBQSxDQUFXLFNBQUEsR0FBQTtBQUNULFlBQUEsR0FBQTtBQUFBLFFBQUEsR0FBQSxHQUFNLENBQUMsQ0FBQyxLQUFGLENBQVEsT0FBTyxDQUFDLEdBQWhCLENBQU4sQ0FBQTtBQUFBLFFBQ0EsR0FBRyxDQUFDLElBQUosR0FBVywrQkFEWCxDQUFBO0FBQUEsUUFFQSxHQUFHLENBQUMscUJBQUosR0FBNEIsdUJBRjVCLENBQUE7ZUFHQSxXQUFBLEdBQWtCLElBQUEsV0FBQSxDQUFZLEdBQVosRUFKVDtNQUFBLENBQVgsQ0FBQSxDQUFBO2FBTUEsRUFBQSxDQUFHLDJDQUFILEVBQWdELFNBQUEsR0FBQTtBQUM5QyxZQUFBLEdBQUE7QUFBQSxRQUFBLEdBQUEsR0FBTSxXQUFXLENBQUMsS0FBWixDQUFBLENBQU4sQ0FBQTtBQUFBLFFBQ0EsTUFBQSxDQUFPLEdBQVAsQ0FBVyxDQUFDLFdBQVosQ0FBQSxDQURBLENBQUE7QUFBQSxRQUVBLE1BQUEsQ0FBTyxHQUFHLENBQUMsZ0NBQVgsQ0FBNEMsQ0FBQyxJQUE3QyxDQUFrRCxNQUFsRCxDQUZBLENBQUE7ZUFHQSxNQUFBLENBQU8sR0FBRyxDQUFDLHFCQUFYLENBQWlDLENBQUMsSUFBbEMsQ0FBdUMsTUFBdkMsRUFKOEM7TUFBQSxDQUFoRCxFQVB5RDtJQUFBLENBQTNELEVBeEJtQjtFQUFBLENBQXJCLENBTEEsQ0FBQTtBQUFBIgp9

//# sourceURL=/Users/ssun/.atom/packages/go-plus/spec/environment-spec.coffee
