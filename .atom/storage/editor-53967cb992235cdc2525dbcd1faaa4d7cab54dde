{"mode":"editor","version":1,"windowDimensions":{"x":59,"y":23,"width":1221,"height":777,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/ssun/Projects/tumblr/confinga","buffers":[{"text":"---\n\n- name: sre-data-service\n  active_checks_enabled: \"1\"\n  passive_checks_enabled: \"0\"\n  parallelize_check: \"0\"\n  obsess_over_service: \"0\"\n  check_freshness: \"0\"\n  flap_detection_enabled: \"1\"\n  process_perf_data: \"0\"\n  retain_status_information: \"1\"\n  retain_nonstatus_information: \"1\"\n  is_volatile: \"0\"\n  check_period: 24x7\n  max_check_attempts: \"3\"\n  notification_options: w,u,c,r\n  normal_check_interval: \"5\"\n  retry_check_interval: \"2\"\n  notification_interval: \"0\"\n  notification_period: 24x7\n  register: \"0\"\n  contact_groups: sre-data\n\n- name: sre-data-email-service\n  use: sre-data-service\n  contact_groups: sre-data-basic\n  register: \"0\"\n\n- name: sre-data-escalation-service\n  use: sre-data-service\n  contact_groups: sre-data\n  register: \"0\"\n\n- use: sre-data-escalation-service\n  name: sre-data-tsdb-service\n  servicegroups: tsdb_dependent\n  notification_options: w,c,r\n  max_check_attempts: \"2\"\n  active_checks_enabled: \"1\"\n  retry_interval: \"10\"\n  register: \"0\"\n\n- use: sre-data-tsdb-service\n  name: sre-data-tsdb-service-gearman\n  active_checks_enabled: \"1\"\n  retry_interval: \"2\"\n  register: \"0\"\n\n- use: sre-data-service\n  name: sre-data-monit-service\n  contact_groups: sre-data\n  servicegroups: monit\n  register: \"0\"\n\n- use: sre-data-tsdb-service\n  name: sre-data-scribe-tsdb-service\n  max_check_attempts: \"3\"\n  normal_check_interval: \"30\"\n  retry_check_interval: \"30\"\n  active_checks_enabled: \"1\"\n  notification_options: c,r\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-scribe_deduplicate.velocity\n  register: \"0\"\n\n- use: sre-data-email-service\n  service_description: \"[DATASRE] Monit: agate\"\n  check_command:\n  - check_monit_generic\n  - agate\n  - critical\n  hostgroup_name: PRIMARY_ROLE:TUMBLR_APP,!web-assets,!mailparsers,!NODECLASS:SCRIBEAGGREGATOR\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Agate\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Agate Error Rate\"\n  check_command:\n  - Agate_Error_Rate\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Agate\n\n- use: sre-data-email-service\n  service_description: \"[DATASRE] Monit: wiktory-writer-thrift\"\n  check_command:\n  - check_monit_generic\n  - wiktory-writer-thrift\n  - critical\n  hostgroup_name: POOL:AGATE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Wiktory\n\n- use: sre-data-tsdb-service\n  service_description: \"[CIG-TMX] Threatmetrix low registration pass rate\"\n  check_command:\n  - Antispam_Threatmetrix_Positive_Rate\n  contact_groups: cig-tmx\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Antispam:Threatmetrixpositives\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Qkiller\"\n  check_command:\n  - check_monit_generic\n  - qkiller\n  - critical\n  hostgroup_name: db_master\n  contact_groups: dont-notify\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Qkiller\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] MySQL Master\"\n  servicegroups: mysql_master\n  check_command:\n  - check_mysql\n  - monitoring\n  hostgroup_name: db_master\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-MySQLMaster\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] MySQL Slave\"\n  servicegroups: mysql_slave\n  check_command:\n  - check_mysql_slave\n  - monitoring\n  hostgroup_name: db_slave\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-MySQLSlave\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Virident Card\"\n  servicegroups: virident_card,nrpe_dependent\n  check_command:\n  - check_virident\n  hostgroup_name: NODECLASS:DATABASE55NODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-ViridentCard\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Fibr: TCP80\"\n  check_command:\n  - check_tcp_host\n  - fibr.ewr01.tumblr.net\n  - \"80\"\n  - \"5\"\n  - \"10\"\n  - \"60\"\n  servicegroups: http\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Fibr:TCP80\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Fibr: TCP4242\"\n  check_command:\n  - check_http_host\n  - fibr.ewr01.tumblr.net\n  - \"4242\"\n  - queryuimain\n  - \"60\"\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Fibr:TCP4242\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Datanode: Failed disks\"\n  check_command:\n  - DataNode_failed_volumes\n  hostgroup_name: SECONDARY_ROLE:DATANODE,SECONDARY_ROLE:REGION_SERVER\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Datanode:FailedDisks\n\n- service_description: \"[DATASRE] Datanode: Tasktracker TCP50060\"\n  use: sre-data-escalation-service\n  hostgroup_name: SECONDARY_ROLE:DATANODE\n  servicegroups: tasktracker_TCP50060\n  check_command:\n  - check_remote_tasktracker\n  - \"50060\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Datanode:TasktrackerTCP50060\n\n- service_description: \"[DATASRE] Datanode: TCP50075\"\n  use: sre-data-escalation-service\n  hostgroup_name: SECONDARY_ROLE:DATANODE\n  servicegroups: datanode_TCP50075\n  check_command:\n  - check_remote_datanode\n  - \"50075\"\n  - \"50070\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Datanode:TCP50075\n\n- service_description: \"[DATASRE] Datanode: Task Tracker Latency\"\n  use: sre-data-escalation-service\n  check_command:\n  - check_tcp\n  - \"50060\"\n  - \"5\"\n  - \"10\"\n  - \"15\"\n  hostgroup_name: SECONDARY_ROLE:DATANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Datanode:TaskTrackerLatency\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HDFS: Average Sync Time\"\n  check_command:\n  - Avg_Time_HDFS_Sync\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HDFS:AverageSyncTime\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HDFS: Average Transaction Time\"\n  check_command:\n  - Avg_Time_HDFS_Transaction\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HDFS:AverageTransactionTime\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HDFS: Consistency\"\n  check_command:\n  - check_hdfs\n  - \"10\"\n  - \"20\"\n  hostgroup_name: NODECLASS:NAMENODE\n  normal_check_interval: 720 ; checks every 12 hours\n  retry_check_interval: \"20\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HDFS:Consistency\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HDFS: Corrupt Blocks\"\n  check_command:\n  - Corrupted_HDFS_Blocks\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HDFS:CorruptBlocks\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HDFS: Free Space\"\n  check_command:\n  - Capacity_Remaining\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HDFS:FreeSpace\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HDFS: Underreplicated Blocks\"\n  check_command:\n  - Underreplicated_HDFS_Blocks\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HDFS:UnderreplicatedBlocks\n\n- service_description: \"[DATASRE] Jobtracker: Check MapRed\"\n  hostgroup_name: SECONDARY_ROLE:NAMENODE\n  use: sre-data-escalation-service\n  check_command:\n  - check_mapred\n  normal_check_interval: \"120\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Jobtracker:CheckMapRed\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Jobtracker: Number of Total Map Slots\"\n  check_command:\n  - Number_Of_Total_Map_Task_Slots\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Jobtracker:NumberofTotalMapSlots\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Jobtracker: Number of Total Reduce Slots\"\n  check_command:\n  - Number_Of_Total_Reduce_Task_Slots\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Jobtracker:NumbertoTotalReduceSlots\n\n- service_description: \"[DATASRE] JobTracker: TCP50030\"\n  use: sre-data-escalation-service\n  hostgroup_name: SECONDARY_ROLE:NAMENODE\n  servicegroups: jobtracker_TCP50030\n  check_command:\n  - check_remote_jobtracker\n  - \"50030\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Jobtracker:TCP50030\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Hadoop Jobtracker\"\n  check_command:\n  - check_monit_generic\n  - hadoop-jobtracker\n  - critical\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:HadoopJobtracker\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Hive: Table Count\"\n  check_command:\n  - check_hive_tables\n  hostgroup_name: HUE_SERVER:ENABLED\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Hive:TableCount\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Hue: Login Check\"\n  check_command:\n  - check_hue\n  hostgroup_name: HUE_SERVER:ENABLED\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Hue:LoginCheck\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Hive-server\"\n  check_command:\n  - check_monit_generic\n  - hive-server\n  - critical\n  hostgroup_name: HUE_SERVER:ENABLED\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Hive-Server\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Namenode\"\n  check_command:\n  - check_monit_generic\n  - hadoop-namenode\n  - critical\n  hostgroup_name: NODECLASS:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Namenode\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Secondary Namenode\"\n  check_command:\n  - check_monit_generic\n  - hadoop-secondarynamenode\n  - critical\n  hostgroup_name: NODECLASS:SECONDARYNAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:SecondaryNamenode\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Namenode: Percentage of all dead datanodes in current pool\"\n  check_command:\n  - check_datanodes\n  - \"7\"\n  - \"10\"\n  hostgroup_name: SECONDARY_ROLE:NAMENODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Namenode:Percentageofalldeaddatanodesincurrentpool\n\n- service_description: \"[DATASRE] Namenode: TCP50070\"\n  use: sre-data-escalation-service\n  hostgroup_name: SECONDARY_ROLE:NAMENODE\n  servicegroups: namenode_TCP50070\n  check_command:\n  - check_remote_namenode\n  - \"50070\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Namenode:TCP50070\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Tasktracker: Number of failed tasks\"\n  check_command:\n  - Number_Of_Failed_Tasks\n  hostgroup_name: NODECLASS:DATANODE6\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Tasktracker:Numberoffailedtasks\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Tasktracker: Number of pending commits\"\n  check_command:\n  - Number_Of_Pending_Commits\n  hostgroup_name: SECONDARY_ROLE:DATANODE,SECONDARY_ROLE:REGION_SERVER\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Tasktracker:Numberofpendingcommits\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] HBase Cluster: HBCK\"\n  name: sre-data-check_hbase_hbck\n  check_command:\n  - check_hbase_hbck\n  hostgroup_name: SECONDARY_ROLE:HBASE_MASTER\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HBaseCluster:HBCK\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] HBase Regionserver: Region split failure rate\"\n  check_command:\n  - Region_Split_Failure_Rate\n  contact_groups: dont-notify\n  normal_check_interval: 60 ; checks every hour\n  hostgroup_name: SECONDARY_ROLE:REGION_SERVER\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-HBaseRegionserver:Regionsplitfailurerate\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: HBase-master\"\n  check_command:\n  - check_monit_generic\n  - hbase-master\n  - critical\n  hostgroup_name: SECONDARY_ROLE:HBASE_MASTER\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:HBase-master\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: HBase-regionserver\"\n  check_command:\n  - check_monit_generic\n  - hbase-regionserver\n  - critical\n  hostgroup_name: SECONDARY_ROLE:REGION_SERVER\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:HBase-regionserver\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Memcache: Memory Usage\"\n  check_command:\n  - check_memory\n  - \"1\"\n  - \"0\"\n  servicegroups: memory,nrpe_dependent\n  normal_check_interval: \"5\"\n  retry_check_interval: \"20\"\n  hostgroup_name: cache\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Memcache:MemoryUsage\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Memcache: Service Uptime\"\n  check_command:\n  - check_memcached\n  - \"600\"\n  servicegroups: memcached\n  hostgroup_name: cache\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Memcache:ServiceUptime\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Memcached\"\n  check_command:\n  - check_monit_generic\n  - memcached\n  - critical\n  hostgroup_name: cache\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:memcached\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Network: Link eth0\"\n  check_command:\n  - check_network_link\n  - eth0\n  hostgroup_name: data-all\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Network:Linketh0/eth1\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Network: Link eth1\"\n  check_command:\n  - check_network_link\n  - eth1\n  hostgroup_name: data-all,!PRIMARY_ROLE:HADOOP\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Network:Linketh0/eth1\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: Fibr\"\n  check_command:\n  - check_monit_generic\n  - fibr\n  - critical\n  hostgroup_name: opentsdb-next\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Fibr\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: OpenTSDB\"\n  check_command:\n  - check_monit_generic\n  - opentsdb\n  - critical\n  hostgroup_name: opentsdb-next\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Opentsdb\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] OpenTSDB: HTTP\"\n  check_command:\n  - check_opentsdb\n  hostgroup_name: opentsdb-next\n  retry_check_interval: \"5\"\n  max_check_attempts: \"6\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-OpenTSDB:HTTP\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] OpenTSDB: Health\"\n  check_command:\n  - check_tsd_health\n  hostgroup_name: opentsdb-next\n  retry_check_interval: \"5\"\n  max_check_attempts: \"6\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-OpenTSDB:Health\n\n- name: sre-data-puppet-check\n  use: sre-data-escalation-service\n  servicegroups: puppet-lastrun\n  service_description: \"[DATASRE] Puppet: Last Run\"\n  check_command:\n  - check_last_puppet\n  - \"2\"\n  - \"4\"\n  hostgroup_name: data-all\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Puppet:LastRun\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Tribute AutoPromotion\"\n  check_command:\n  - Tribute_AutoPromotion_Rate\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-TributeAutoPromotion\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Redis: Memory Usage\"\n  check_command:\n  - Redis_Memory\n  hostgroup_name: redis_multi_all\n  contact_groups: dont-notify\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Redis:MemoryUsage\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Redis: Evicting Keys\"\n  check_command:\n  - Redis_Eviction_Rate\n  hostgroup_name: SECONDARY_ROLE:REDIS\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Redis:EvictingKeys\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Redis: Blocked Clients\"\n  check_command:\n  - check_redis\n  - blocked_clients\n  - \"1\"\n  - \"1\"\n  servicegroups: nrpe_dependent\n  contact_groups: dont-notify\n  hostgroup_name: redis,gearman\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Redis\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Redis: Process Memory\"\n  check_command:\n  - check_redis\n  - used_memory_rss\n  - \"8589934592\"\n  - \"13958643712\"\n  servicegroups: nrpe_dependent\n  hostgroup_name: redis,gearman\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Redis\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Disk Free\"\n  check_command:\n  - check_disks\n  - 25%\n  - 20%\n  servicegroups: disks,nrpe_dependent\n  hostgroup_name: data-all,!SECONDARY_ROLE:DATANODE,!SECONDARY_ROLE:REGION_SERVER,!NODECLASS:DATABASE55NODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-DiskFree\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Disk Free: Database\"\n  check_command:\n  - check_disks_exclude\n  - 25%\n  - 20%\n  - /var/lib/mysql\n  servicegroups: disks,nrpe_dependent\n  hostgroup_name: NODECLASS:DATABASE55NODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-DiskFree:Databasenodes(^db-.*)\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Disk Free: Database MySQL\"\n  check_command:\n  - check_disks_path\n  - 10%\n  - 7%\n  - /var/lib/mysql\n  servicegroups: disks,nrpe_dependent\n  hostgroup_name: NODECLASS:DATABASE55NODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-DiskFree:Databasenodes(^db-.*)\n\n- use: sre-data-tsdb-service\n  service_description: \"[DATASRE] Exec Time: Squisher - DONT NOTIFY\"\n  check_command:\n  - Squishy_exec_rate\n  hostgroup_name: NODECLASS:ICINGANODE\n  contact_groups: dont-notify\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-ExecTime:Squisher\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Load\"\n  check_command:\n  - check_load\n  - \"20\"\n  - \"30\"\n  servicegroups: load,nrpe_dependent\n  contact_groups: dont-notify\n  hostgroup_name: data-all,!gearman,!firehose\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Load\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Memory Usage\"\n  check_command:\n  - check_memory\n  - \"15\"\n  - \"10\"\n  servicegroups: memory,nrpe_dependent\n  hostgroup_name: \"!gearman,rediscover\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Memory\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: TCP2812\"\n  check_command:\n  - check_tcp\n  - \"2812\"\n  - \"5\"\n  - \"10\"\n  - \"60\"\n  hostgroup_name: data-all\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:TCP2812\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Swap rate\"\n  check_command:\n  - check_swap_act\n  servicegroups: memory,nrpe_dependent\n  hostgroup_name: rediscover\n  max_check_attempts: \"5\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-SwapRate\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: NRPE\"\n  check_command:\n  - check_monit_generic\n  - nrpe\n  - warning\n  hostgroup_name: data-all\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-NRPE\n  contact_groups: dont-notify\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] NIC Bandwidth: 1G\"\n  check_command:\n  - check_nic_bandwidth\n  - bond0\n  - \"70\"\n  - \"80\"\n  - 1000M\n  hostgroup_name: data-all,!PRIMARY_ROLE:HADOOP\n  contact_groups: dont-notify\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Network:Bandwidth\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] NIC Bandwidth: 10G\"\n  check_command:\n  - check_nic_bandwidth\n  - eth0\n  - \"70\"\n  - \"80\"\n  - 10000M\n  hostgroup_name: PRIMARY_ROLE:HADOOP\n  contact_groups: dont-notify\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Network:Bandwidth\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] NTP\"\n  name: sre-data-NTP\n  servicegroups: NTP\n  check_command:\n  - check_ntp_time\n  - \"0.5\"\n  - \"1\"\n  contact_groups: dont-notify\n  hostgroup_name: data-all\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-NTP\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] iDrac setting: SysProfile\"\n  servicegroups: nrpe_dependent\n  check_command:\n  - check_idrac_settings\n  - sysprofile\n  check_interval: \"30\"\n  retry_interval: \"15\"\n  max_check_attempts: \"2\"\n  event_handler: handler_idrac_tasks!sysprofile!$SERVICESTATE$!$SERVICESTATETYPE$!$SERVICEATTEMPT$!$SERVICEDURATIONSEC$!$SERVICEOUTPUT$\n  hostgroup_name: r720_idrac_checks\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-iDrac\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: twemproxy\"\n  check_command:\n  - check_monit_generic\n  - twemproxy\n  - critical\n  hostgroup_name: PRIMARY_ROLE:TUMBLR_APP,!web-assets,!mailparsers,!POOL:PEANUTBUTTER,!POOL:POOTLE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Twemproxy\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: zookeeper-server\"\n  check_command:\n  - check_monit_generic\n  - zookeeper-server\n  - critical\n  hostgroup_name: NODECLASS:ZOOKEEPERNODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Zookeeper-Server\n\n- use: sre-data-monit-service\n  service_description: \"[DATASRE] Monit: zookeeper-ruok\"\n  check_command:\n  - check_monit_generic\n  - ruok\n  - critical\n  hostgroup_name: NODECLASS:ZOOKEEPERNODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Monit:Zookeeper-ruok\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: Lag\"\n  check_command:\n  - zookeeper_lag\n  hostgroup_name: NODECLASS:ZOOKEEPERNODE\n  max_check_attempts: \"6\"\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:Lag\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum ALPHA\"\n  check_command:\n  - zookeeper_pool_check\n  - ALPHA\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromALPHA\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum BETA\"\n  check_command:\n  - zookeeper_pool_check\n  - BETA\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromBETA\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum JELLY\"\n  check_command:\n  - zookeeper_pool_check\n  - JELLY\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromJELLY\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum HBASE_TSDNEXT\"\n  check_command:\n  - zookeeper_pool_check\n  - HBASE_TSDNEXT\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromHBASE_OPENTSDB\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum HBASE_PLATFORM\"\n  check_command:\n  - zookeeper_pool_check\n  - HBASE_PLATFORM\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromHBASE_PLATFORM\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum HBASE_REFROG\"\n  check_command:\n  - zookeeper_pool_check\n  - HBASE_REFROG\n  hostgroup_name: NODECLASS:ICINGANODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromHBASE_REFROG\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: quorum META\"\n  check_command:\n  - zookeeper_pool_meta\n  hostgroup_name: NODECLASS:ICINGANODE\n  servicegroups: master_only_checks\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:QuoromMETA\n\n- use: sre-data-escalation-service\n  service_description: \"[DATASRE] Zookeeper: status\"\n  check_command:\n  - zookeeper_status\n  hostgroup_name: NODECLASS:ZOOKEEPERNODE\n  action_url: https://confluence.ewr01.tumblr.net/display/TUMBLR/Icinga+Response+Guide+v2#IcingaResponseGuidev2-Zookeeper:Status\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_auth\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_auth\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_conversion\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_conversion\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_email\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_email\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_follow_wall\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_follow_wall\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_mobile\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_mobile\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_post\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_post\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_premium_radar\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_premium_radar\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_radar\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_radar\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_reach\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_reach\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_recommend\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_recommend\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_search\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_search\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_search_page\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_search_page\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_search_session\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_search_session\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity act_social\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - act_social\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity api_logged_out_dash\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - api_logged_out_dash\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity apilog\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - apilog\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity featured_post\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - featured_post\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity post_data\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - post_data\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity suspended\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - suspended\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity user_mobile_login\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - user_mobile_login\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity user_registration_attempt\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - user_registration_attempt\n\n- use: sre-data-scribe-tsdb-service\n  service_description: \"[DATASRE] scribe_deduplicate.velocity uuid_registration_attempt\"\n  check_command:\n  - check_scribe_deduplicate_velocity\n  - uuid_registration_attempt\n","markers":{"markers":{"1":{"id":1,"range":[[535,14],[535,120]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":40,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"},"64":{"id":64,"range":[[441,31],[441,31]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"209":{"id":209,"range":[[415,12],[415,12]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"241":{"id":241,"range":[[535,14],[535,120]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"242":{"id":242,"range":[[535,14],[535,120]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"243":{"id":243,"range":[[546,14],[546,120]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"244":{"id":244,"range":[[557,14],[557,120]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/ssun/Projects/tumblr/confinga/service_definitions/sre_data.yml","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"320777d4225be100be42ae16d6dc1b848766697e","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":40,"softTabs":true,"displayBuffer":{"id":41,"softWrapped":false,"editorWidthInChars":null,"scrollTop":8180,"scrollLeft":48,"tokenizedBuffer":{"bufferPath":"/Users/ssun/Projects/tumblr/confinga/service_definitions/sre_data.yml","invisibles":null,"deserializer":"TokenizedBuffer"},"invisibles":null,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemUri":"/Users/ssun/Projects/tumblr/confinga/service_definitions/sre_data.yml","focused":false,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-yaml","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":["name: sre-data-escalation-service","name: tsdb-service","name: tsdb","scribe_dedup","bi","contacts","scribe-tsd","name: sre-data-scribe","tag_raw","Database","Alerts","Git Protocal","Git Protoc","tumblr app","Search: Cluster Nodes: Blogsearch","scribe_ded","tail","fail","go_log","go","opentsdb"," [DATASRE] Monit: OpenTSDB","[DATASRE] Monit: OpenTSDB","network","disk free"],"replaceHistory":[],"pathsHistory":[]},"fuzzy-finder":{"/Users/ssun/Projects/tumblr/confinga/service_definitions/sre_data.yml":1414641089027},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":2169927},"tree-view":{"directoryExpansionStates":{},"hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200},"sublime-tabs":{"directoryExpansionStates":{"service_definitions":{}},"selectedPath":"/Users/ssun/Projects/tumblr/confinga/service_definitions/sre_data.yml","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":196}}}