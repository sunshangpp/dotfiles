function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

/* eslint-env jasmine */

var _libExecutor = require('../lib/executor');

var _libPathhelper = require('./../lib/pathhelper');

var _libPathhelper2 = _interopRequireDefault(_libPathhelper);

var _os = require('os');

var _os2 = _interopRequireDefault(_os);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

'use babel';

describe('executor', function () {
  var executor = null;
  var prefix = null;
  var result = null;
  var error = null;

  beforeEach(function () {
    runs(function () {
      result = null;
      error = null;
      prefix = '/';
      if (_os2['default'].platform() === 'win32') {
        prefix = 'C:\\';
      }
      executor = new _libExecutor.Executor();
    });
  });

  describe('when the executor is used', function () {
    it('has a valid environment', function () {
      expect(executor).toBeDefined();
      expect(executor.environment).toBeDefined();
      expect(executor.environment()).toBeDefined();
      expect(executor.environment()).toBeTruthy();
      expect(executor.environment().PATH).toBeDefined();
      expect(executor.environment().PATH).not.toBe('');
    });
  });

  describe('when asynchronously executing a command', function () {
    it('succeeds', function () {
      var command = 'env';
      if (_os2['default'].platform() === 'win32') {
        command = _path2['default'].resolve(__dirname, 'tools', 'env', 'env_windows_amd64.exe');
      }

      waitsForPromise(function () {
        return executor.exec(command, [], { cwd: prefix }).then(function (r) {
          result = r;
        })['catch'](function (e) {
          error = e;
        });
      });

      runs(function () {
        expect(result).toBeDefined();
        expect(result.exitcode).toBeDefined();
        expect(result.exitcode).toBe(0);
        expect(result.stdout).toBeDefined();
        expect(result.stdout).not.toBe('');
        expect(result.stderr).toBeDefined();
        expect(result.stderr).toBe('');

        expect(result.error).toBeFalsy();
        expect(error).toBeFalsy();
      });
    });

    it('sets the working directory correctly', function () {
      var command = 'pwd';
      if (_os2['default'].platform() === 'win32') {
        command = _path2['default'].resolve(__dirname, 'tools', 'pwd', 'pwd_windows_amd64.exe');
      }

      waitsForPromise(function () {
        return executor.exec(command, [], { cwd: _libPathhelper2['default'].home() }).then(function (r) {
          result = r;
        })['catch'](function (e) {
          error = e;
        });
      });

      runs(function () {
        expect(result).toBeDefined();
        expect(result.exitcode).toBeDefined();
        expect(result.exitcode).toBe(0);
        expect(result.stdout).toBeDefined();
        expect(result.stdout).toBe(_libPathhelper2['default'].home() + '\n');
        expect(result.stderr).toBeDefined();
        expect(result.stderr).toBe('');

        expect(result.error).toBeFalsy();
        expect(error).toBeFalsy();
      });
    });

    it('sets the environment correctly', function () {
      var command = 'env';
      if (_os2['default'].platform() === 'win32') {
        command = _path2['default'].resolve(__dirname, 'tools', 'env', 'env_windows_amd64.exe');
      }
      var env = { testenv: 'testing' };

      waitsForPromise(function () {
        return executor.exec(command, [], { env: env }).then(function (r) {
          result = r;
        })['catch'](function (e) {
          error = e;
        });
      });

      runs(function () {
        expect(result).toBeDefined();
        expect(result.exitcode).toBeDefined();
        expect(result.exitcode).toBe(0);
        expect(result.stdout).toBeDefined();
        expect(result.stdout).toContain('testenv=testing\n');
        expect(result.stderr).toBeDefined();
        expect(result.stderr).toBe('');

        expect(result.error).toBeFalsy();
        expect(error).toBeFalsy();
      });
    });

    it('handles and returns an ENOENT error if the command was not found', function () {
      waitsForPromise(function () {
        return executor.exec('nonexistentcommand', []).then(function (r) {
          result = r;
        })['catch'](function (e) {
          error = e;
        });
      });

      runs(function () {
        expect(result).toBeDefined();
        expect(result).toBeTruthy();
        expect(result.error).toBeDefined();
        expect(result.error).toBeTruthy();
        expect(result.error.code).toBe('ENOENT');
        expect(result.error.errno).toBe('ENOENT');
        expect(result.error.message).toBe('spawn nonexistentcommand ENOENT');
        expect(result.error.path).toBe('nonexistentcommand');
        expect(result.exitcode).toBeDefined();
        expect(result.exitcode).not.toBe(0);
        expect(result.exitcode).toBe(127);
        expect(result.stdout).toBeDefined();
        expect(result.stdout).toBe('');
        expect(result.stderr).toBeDefined();
        if (_os2['default'].platform() === 'win32') {
          expect(result.stderr).toBe('\'nonexistentcommand\' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n');
        } else {
          expect(result.stderr).toBe('');
        }
        expect(error).toBeFalsy();
      });
    });
  });

  describe('when synchronously executing a command', function () {
    it('succeeds', function () {
      var command = 'env';
      if (_os2['default'].platform() === 'win32') {
        command = _path2['default'].resolve(__dirname, 'tools', 'env', 'env_windows_amd64.exe');
      }

      var result = executor.execSync(command);
      expect(result.exitcode).toBeDefined();
      expect(result.exitcode).toBe(0);
      expect(result.stdout).toBeDefined();
      expect(result.stdout).not.toBe('');
      expect(result.stderr).toBeDefined();
      expect(result.stderr).toBe('');
      expect(result.error).toBeFalsy();
    });

    it('returns a message if the command was not found', function () {
      var result = executor.execSync('nonexistentcommand');
      expect(result.exitcode).toBeDefined();
      expect(result.exitcode).toBe(127);
      expect(result.stdout).toBeDefined();
      expect(result.stdout).toBe('');
      expect(result.stderr).toBeDefined();
      expect(result.stderr).toBe('');
      expect(result.error).toBeTruthy();
      expect(result.error.code).toBe('ENOENT');
      expect(result.error.errno).toBe('ENOENT');
      expect(result.error.message).toBe('spawnSync nonexistentcommand ENOENT');
      expect(result.error.path).toBe('nonexistentcommand');
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2dvLWNvbmZpZy9zcGVjL2V4ZWN1dG9yLXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OzsyQkFHdUIsaUJBQWlCOzs2QkFDakIscUJBQXFCOzs7O2tCQUM3QixJQUFJOzs7O29CQUNGLE1BQU07Ozs7QUFOdkIsV0FBVyxDQUFBOztBQVFYLFFBQVEsQ0FBQyxVQUFVLEVBQUUsWUFBTTtBQUN6QixNQUFJLFFBQVEsR0FBRyxJQUFJLENBQUE7QUFDbkIsTUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFBO0FBQ2pCLE1BQUksTUFBTSxHQUFHLElBQUksQ0FBQTtBQUNqQixNQUFJLEtBQUssR0FBRyxJQUFJLENBQUE7O0FBRWhCLFlBQVUsQ0FBQyxZQUFNO0FBQ2YsUUFBSSxDQUFDLFlBQU07QUFDVCxZQUFNLEdBQUcsSUFBSSxDQUFBO0FBQ2IsV0FBSyxHQUFHLElBQUksQ0FBQTtBQUNaLFlBQU0sR0FBRyxHQUFHLENBQUE7QUFDWixVQUFJLGdCQUFHLFFBQVEsRUFBRSxLQUFLLE9BQU8sRUFBRTtBQUM3QixjQUFNLEdBQUcsTUFBTSxDQUFBO09BQ2hCO0FBQ0QsY0FBUSxHQUFHLDJCQUFjLENBQUE7S0FDMUIsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBOztBQUVGLFVBQVEsQ0FBQywyQkFBMkIsRUFBRSxZQUFNO0FBQzFDLE1BQUUsQ0FBQyx5QkFBeUIsRUFBRSxZQUFNO0FBQ2xDLFlBQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUM5QixZQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBQzFDLFlBQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUM1QyxZQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUE7QUFDM0MsWUFBTSxDQUFDLFFB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QUFDLG9CQUFvQixDQUFDLENBQUE7S0FDckQsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBO0NBQ0gsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2dvLWNvbmZpZy9zcGVjL2V4ZWN1dG9yLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuLyogZXNsaW50LWVudiBqYXNtaW5lICovXG5cbmltcG9ydCB7RXhlY3V0b3J9IGZyb20gJy4uL2xpYi9leGVjdXRvcidcbmltcG9ydCBwYXRoaGVscGVyIGZyb20gJy4vLi4vbGliL3BhdGhoZWxwZXInXG5pbXBvcnQgb3MgZnJvbSAnb3MnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuXG5kZXNjcmliZSgnZXhlY3V0b3InLCAoKSA9PiB7XG4gIGxldCBleGVjdXRvciA9IG51bGxcbiAgbGV0IHByZWZpeCA9IG51bGxcbiAgbGV0IHJlc3VsdCA9IG51bGxcbiAgbGV0IGVycm9yID0gbnVsbFxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHJ1bnMoKCkgPT4ge1xuICAgICAgcmVzdWx0ID0gbnVsbFxuICAgICAgZXJyb3IgPSBudWxsXG4gICAgICBwcmVmaXggPSAnLydcbiAgICAgIGlmIChvcy5wbGF0Zm9ybSgpID09PSAnd2luMzInKSB7XG4gICAgICAgIHByZWZpeCA9ICdDOlxcXFwnXG4gICAgICB9XG4gICAgICBleGVjdXRvciA9IG5ldyBFeGVjdXRvcigpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnd2hlbiB0aGUgZXhlY3V0b3IgaXMgdXNlZCcsICgpID0+IHtcbiAgICBpdCgnaGFzIGEgdmFsaWQgZW52aXJvbm1lbnQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZXhlY3V0b3IpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChleGVjdXRvci5lbnZpcm9ubWVudCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KGV4ZWN1dG9yLmVudmlyb25tZW50KCkpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChleGVjdXRvci5lbnZpcm9ubWVudCgpKS50b0JlVHJ1dGh5KClcbiAgICAgIGV4cGVjdChleGVjdXRvci5lbnZpcm9ubWVudCgpLlBBVEgpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChleGVjdXRvci5lbnZpcm9ubWVudCgpLlBBVEgpLm5vdC50b0JlKCcnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ3doZW4gYXN5bmNocm9ub3VzbHkgZXhlY3V0aW5nIGEgY29tbWFuZCcsICgpID0+IHtcbiAgICBpdCgnc3VjY2VlZHMnLCAoKSA9PiB7XG4gICAgICBsZXQgY29tbWFuZCA9ICdlbnYnXG4gICAgICBpZiAob3MucGxhdGZvcm0oKSA9PT0gJ3dpbjMyJykge1xuICAgICAgICBjb21tYW5kID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ3Rvb2xzJywgJ2VudicsICdlbnZfd2luZG93c19hbWQ2NC5leGUnKVxuICAgICAgfVxuXG4gICAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4ge1xuICAgICAgICByZXR1cm4gZXhlY3V0b3IuZXhlYyhjb21tYW5kLCBbXSwge2N3ZDogcHJlZml4fSkudGhlbigocikgPT4ge1xuICAgICAgICAgIHJlc3VsdCA9IHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHsgZXJyb3IgPSBlIH0pXG4gICAgICB9KVxuXG4gICAgICBydW5zKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXhpdGNvZGUpLnRvQmUoMClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLm5vdC50b0JlKCcnKVxuICAgICAgICBleHBlY3QocmVzdWx0LnN0ZGVycikudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QocmVzdWx0LnN0ZGVycikudG9CZSgnJylcblxuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlRmFsc3koKVxuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVGYWxzeSgpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgnc2V0cyB0aGUgd29ya2luZyBkaXJlY3RvcnkgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbGV0IGNvbW1hbmQgPSAncHdkJ1xuICAgICAgaWYgKG9zLnBsYXRmb3JtKCkgPT09ICd3aW4zMicpIHtcbiAgICAgICAgY29tbWFuZCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICd0b29scycsICdwd2QnLCAncHdkX3dpbmRvd3NfYW1kNjQuZXhlJylcbiAgICAgIH1cblxuICAgICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dG9yLmV4ZWMoY29tbWFuZCwgW10sIHtjd2Q6IHBhdGhoZWxwZXIuaG9tZSgpfSkudGhlbigocikgPT4ge1xuICAgICAgICAgIHJlc3VsdCA9IHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHsgZXJyb3IgPSBlIH0pXG4gICAgICB9KVxuXG4gICAgICBydW5zKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXhpdGNvZGUpLnRvQmUoMClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLnRvQmUocGF0aGhlbHBlci5ob21lKCkgKyAnXFxuJylcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRlcnIpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRlcnIpLnRvQmUoJycpXG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZUZhbHN5KClcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlRmFsc3koKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3NldHMgdGhlIGVudmlyb25tZW50IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGxldCBjb21tYW5kID0gJ2VudidcbiAgICAgIGlmIChvcy5wbGF0Zm9ybSgpID09PSAnd2luMzInKSB7XG4gICAgICAgIGNvbW1hbmQgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAndG9vbHMnLCAnZW52JywgJ2Vudl93aW5kb3dzX2FtZDY0LmV4ZScpXG4gICAgICB9XG4gICAgICBsZXQgZW52ID0ge3Rlc3RlbnY6ICd0ZXN0aW5nJ31cblxuICAgICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dG9yLmV4ZWMoY29tbWFuZCwgW10sIHtlbnY6IGVudn0pLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICByZXN1bHQgPSByXG4gICAgICAgIH0pLmNhdGNoKChlKSA9PiB7IGVycm9yID0gZSB9KVxuICAgICAgfSlcblxuICAgICAgcnVucygoKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5leGl0Y29kZSkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlKDApXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3Rkb3V0KS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3Rkb3V0KS50b0NvbnRhaW4oJ3Rlc3RlbnY9dGVzdGluZ1xcbicpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RkZXJyKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RkZXJyKS50b0JlKCcnKVxuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVGYWxzeSgpXG4gICAgICAgIGV4cGVjdChlcnJvcikudG9CZUZhbHN5KClcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdoYW5kbGVzIGFuZCByZXR1cm5zIGFuIEVOT0VOVCBlcnJvciBpZiB0aGUgY29tbWFuZCB3YXMgbm90IGZvdW5kJywgKCkgPT4ge1xuICAgICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dG9yLmV4ZWMoJ25vbmV4aXN0ZW50Y29tbWFuZCcsIFtdKS50aGVuKChyKSA9PiB7XG4gICAgICAgICAgcmVzdWx0ID0gclxuICAgICAgICB9KS5jYXRjaCgoZSkgPT4geyBlcnJvciA9IGUgfSlcbiAgICAgIH0pXG5cbiAgICAgIHJ1bnMoKCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVUcnV0aHkoKVxuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVUcnV0aHkoKVxuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0VOT0VOVCcpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuZXJybm8pLnRvQmUoJ0VOT0VOVCcpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9CZSgnc3Bhd24gbm9uZXhpc3RlbnRjb21tYW5kIEVOT0VOVCcpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IucGF0aCkudG9CZSgnbm9uZXhpc3RlbnRjb21tYW5kJylcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5leGl0Y29kZSkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS5ub3QudG9CZSgwKVxuICAgICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlKDEyNylcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLnRvQmUoJycpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RkZXJyKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGlmIChvcy5wbGF0Zm9ybSgpID09PSAnd2luMzInKSB7XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGRlcnIpLnRvQmUoJ1xcJ25vbmV4aXN0ZW50Y29tbWFuZFxcJyBpcyBub3QgcmVjb2duaXplZCBhcyBhbiBpbnRlcm5hbCBvciBleHRlcm5hbCBjb21tYW5kLFxcclxcbm9wZXJhYmxlIHByb2dyYW0gb3IgYmF0Y2ggZmlsZS5cXHJcXG4nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3RkZXJyKS50b0JlKCcnKVxuICAgICAgICB9XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9CZUZhbHN5KClcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnd2hlbiBzeW5jaHJvbm91c2x5IGV4ZWN1dGluZyBhIGNvbW1hbmQnLCAoKSA9PiB7XG4gICAgaXQoJ3N1Y2NlZWRzJywgKCkgPT4ge1xuICAgICAgbGV0IGNvbW1hbmQgPSAnZW52J1xuICAgICAgaWYgKG9zLnBsYXRmb3JtKCkgPT09ICd3aW4zMicpIHtcbiAgICAgICAgY29tbWFuZCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICd0b29scycsICdlbnYnLCAnZW52X3dpbmRvd3NfYW1kNjQuZXhlJylcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3VsdCA9IGV4ZWN1dG9yLmV4ZWNTeW5jKGNvbW1hbmQpXG4gICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlKDApXG4gICAgICBleHBlY3QocmVzdWx0LnN0ZG91dCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGRvdXQpLm5vdC50b0JlKCcnKVxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGRlcnIpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RkZXJyKS50b0JlKCcnKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZUZhbHN5KClcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgYSBtZXNzYWdlIGlmIHRoZSBjb21tYW5kIHdhcyBub3QgZm91bmQnLCAoKSA9PiB7XG4gICAgICBsZXQgcmVzdWx0ID0gZXhlY3V0b3IuZXhlY1N5bmMoJ25vbmV4aXN0ZW50Y29tbWFuZCcpXG4gICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVzdWx0LmV4aXRjb2RlKS50b0JlKDEyNylcbiAgICAgIGV4cGVjdChyZXN1bHQuc3Rkb3V0KS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVzdWx0LnN0ZG91dCkudG9CZSgnJylcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RkZXJyKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVzdWx0LnN0ZGVycikudG9CZSgnJylcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVUcnV0aHkoKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdFTk9FTlQnKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5lcnJubykudG9CZSgnRU5PRU5UJylcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9CZSgnc3Bhd25TeW5jIG5vbmV4aXN0ZW50Y29tbWFuZCBFTk9FTlQnKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5wYXRoKS50b0JlKCdub25leGlzdGVudGNvbW1hbmQnKVxuICAgIH0pXG4gIH0pXG59KVxuIl19
//# sourceURL=/Users/ssun/.atom/packages/go-config/spec/executor-spec.js
