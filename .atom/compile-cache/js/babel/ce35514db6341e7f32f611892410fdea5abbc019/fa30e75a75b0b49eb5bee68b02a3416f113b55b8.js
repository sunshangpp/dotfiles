'use babel';

describe('Environment', function () {
  var environmentMain = null;
  var service = null;
  beforeEach(function () {
    waitsForPromise(function () {
      return atom.packages.activatePackage('environment').then(function (pack) {
        environmentMain = pack.mainModule;
      });
    });
  });

  describe('when the environment package is activated', function () {
    it('activates successfully', function () {
      expect(environmentMain).toBeDefined();
    });

    it('provides the environment service', function () {
      expect(environmentMain).toBeDefined();
      var called = false;
      expect(service).toBeFalsy();
      atom.packages.serviceHub.consume('environment', '1.0.0', function (e) {
        service = e;
        called = true;
      });

      waitsFor(function () {
        return called;
      });

      runs(function () {
        expect(service).toBeTruthy();
      });
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2Vudmlyb25tZW50L3NwZWMvZW52aXJvbm1lbnQtc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUE7O0FBRVgsUUFBUSxDQUFDLGFBQWEsRUFBRSxZQUFNO0FBQzVCLE1BQUksZUFBZSxHQUFHLElBQUksQ0FBQTtBQUMxQixNQUFJLE9BQU8sR0FBRyxJQUFJLENBQUE7QUFDbEIsWUFBVSxDQUFDLFlBQU07QUFDZixtQkFBZSxDQUFDLFlBQU07QUFDcEIsYUFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxJQUFJLEVBQUk7QUFDL0QsdUJBQWUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFBO09BQ2xDLENBQUMsQ0FBQTtLQUNILENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTs7QUFFRixVQUFRLENBQUMsMkNBQTJDLEVBQUUsWUFBTTtBQUMxRCxNQUFFLENBQUMsd0JBQXdCLEVBQUUsWUFBTTtBQUNqQyxZQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7S0FDdEMsQ0FBQyxDQUFBOztBQUVGLE1BQUUsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFNO0FBQzNDLFlBQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUNyQyxVQUFJLE1BQU0sR0FBRyxLQUFLLENBQUE7QUFDbEIsWUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFBO0FBQzNCLFVBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsT0FBTyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQzlELGVBQU8sR0FBRyxDQUFDLENBQUE7QUFDWCxjQUFNLEdBQUcsSUFBSSxDQUFBO09BQ2QsQ0FBQyxDQUFBOztBQUVGLGNBQVEsQ0FBQyxZQUFNO0FBQ2IsZUFBTyxNQUFNLENBQUE7T0FDZCxDQUFDLENBQUE7O0FBRUYsVUFBSSxDQUFDLFlBQU07QUFDVCxjQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUE7T0FDN0IsQ0FBQyxDQUFBO0tBQ0gsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBO0NBQ0gsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9Vc2Vycy9zc3VuLy5hdG9tL3BhY2thZ2VzL2Vudmlyb25tZW50L3NwZWMvZW52aXJvbm1lbnQtc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnXG5cbmRlc2NyaWJlKCdFbnZpcm9ubWVudCcsICgpID0+IHtcbiAgbGV0IGVudmlyb25tZW50TWFpbiA9IG51bGxcbiAgbGV0IHNlcnZpY2UgPSBudWxsXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICByZXR1cm4gYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoJ2Vudmlyb25tZW50JykudGhlbihwYWNrID0+IHtcbiAgICAgICAgZW52aXJvbm1lbnRNYWluID0gcGFjay5tYWluTW9kdWxlXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ3doZW4gdGhlIGVudmlyb25tZW50IHBhY2thZ2UgaXMgYWN0aXZhdGVkJywgKCkgPT4ge1xuICAgIGl0KCdhY3RpdmF0ZXMgc3VjY2Vzc2Z1bGx5JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGVudmlyb25tZW50TWFpbikudG9CZURlZmluZWQoKVxuICAgIH0pXG5cbiAgICBpdCgncHJvdmlkZXMgdGhlIGVudmlyb25tZW50IHNlcnZpY2UnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZW52aXJvbm1lbnRNYWluKS50b0JlRGVmaW5lZCgpXG4gICAgICBsZXQgY2FsbGVkID0gZmFsc2VcbiAgICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlRmFsc3koKVxuICAgICAgYXRvbS5wYWNrYWdlcy5zZXJ2aWNlSHViLmNvbnN1bWUoJ2Vudmlyb25tZW50JywgJzEuMC4wJywgKGUpID0+IHtcbiAgICAgICAgc2VydmljZSA9IGVcbiAgICAgICAgY2FsbGVkID0gdHJ1ZVxuICAgICAgfSlcblxuICAgICAgd2FpdHNGb3IoKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2FsbGVkXG4gICAgICB9KVxuXG4gICAgICBydW5zKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVUcnV0aHkoKVxuICAgICAgfSlcbiAgICB9KVxuICB9KVxufSlcbiJdfQ==
//# sourceURL=/Users/ssun/.atom/packages/environment/spec/environment-spec.js
